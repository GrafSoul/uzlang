import{r as d,j as e,B as ne,a as qi,A as Ii,d as Oa,S as c,e as l,I as Je,L as Oi,D as Li,P as f,f as Ye,h as J,F as _i,i as Ai,k as Mi,M as Di,l as $,m as b,G as C,n as La,o as se,p as U,q as Wi,s as Ee,W as Ki,E as Bi,t as _a,u as Aa,v as Ma,w as Da,x as Fi,y as Pi,z as Yi,H as $e,V as Wa,J as Hi}from"./vendor-ui-Be8c5TbN.js";import{i as Qi,w as Gi}from"./vendor-sqljs-dmbK7c7E.js";const $a=[{key:"store",title:"Покупки в магазине",description:"Продукты, цены, оплата, вежливые вопросы."},{key:"bazaar",title:"Базар: овощи и фрукты",description:"Торг, количество, свежесть, просьбы."},{key:"city",title:"Поездка по городу",description:"Маршрутка, такси, остановка, направление."},{key:"neighbors",title:"Соседи и погода",description:"Бытовое общение во дворе и дома."},{key:"family",title:"Поздравления и семья",description:"Кто родился, поздравления, теплые фразы."},{key:"pharmacy",title:"Аптека и здоровье",description:"Покупка лекарств, симптомы, базовые вопросы."},{key:"clinic",title:"Поликлиника и запись",description:"Регистрация, очередь, время приема."},{key:"cafe",title:"Кафе и чайхана",description:"Заказ, состав блюда, оплата счета."},{key:"housing",title:"Аренда жилья и быт",description:"Квартира, коммуналка, поломки, хозяин."},{key:"taxi",title:"Такси: продвинутые кейсы",description:"Пробки, ожидание, смена маршрута, точки."},{key:"transport",title:"Общественный транспорт",description:"Пересадки, линии, остановки, проезд."},{key:"work",title:"Работа и офис",description:"График, встречи, задачи и документы."},{key:"bank",title:"Банк и платежи",description:"Карта, перевод, комиссия, баланс."},{key:"school",title:"Детский сад и школа",description:"Расписание, учитель, собрания, справки."},{key:"repair",title:"Сервис и ремонт",description:"Ремонт техники и сроки выполнения."},{key:"delivery",title:"Почта и доставка",description:"Адрес, курьер, самовывоз, оплата."},{key:"documents",title:"Госуслуги и документы",description:"Регистрация, справки, подпись и окна."}],h={store:"/images/store.svg",bazaar:"/images/bazaar.svg",city:"/images/city.svg",neighbors:"/images/neighbors.svg",family:"/images/family.svg",pharmacy:"/images/store.svg",clinic:"/images/city.svg",cafe:"/images/bazaar.svg",housing:"/images/neighbors.svg",taxi:"/images/city.svg",transport:"/images/city.svg",work:"/images/city.svg",bank:"/images/store.svg",school:"/images/family.svg",repair:"/images/store.svg",delivery:"/images/bazaar.svg",documents:"/images/city.svg"},Xi=[{topicKey:"store",imageUrl:h.store,uz:"Assalomu alaykum",reading:"ассалому алайкум",ru:"Здравствуйте",exampleUz:"Assalomu alaykum, non bormi?",exampleRu:"Здравствуйте, хлеб есть?"},{topicKey:"store",imageUrl:h.store,uz:"Qancha turadi?",reading:"канча туради",ru:"Сколько стоит?",exampleUz:"Bu sut qancha turadi?",exampleRu:"Сколько стоит это молоко?"},{topicKey:"store",imageUrl:h.store,uz:"Arzonroq bering",reading:"арзонрок беринг",ru:"Дайте дешевле",exampleUz:"Iloji bo‘lsa, arzonroq bering.",exampleRu:"Если можно, дайте дешевле."},{topicKey:"store",imageUrl:h.store,uz:"Karta qabul qilasizmi?",reading:"карта қабул қиласизми",ru:"Принимаете карту?",exampleUz:"Karta qabul qilasizmi yoki faqat naqdmi?",exampleRu:"Принимаете карту или только наличные?"},{topicKey:"store",imageUrl:h.store,uz:"Yaroqlilik muddati qachongacha?",reading:"яроклилик муддати качонгача",ru:"Какой срок годности?",exampleUz:"Bu yogurtning yaroqlilik muddati qachongacha?",exampleRu:"Какой срок годности у этого йогурта?"},{topicKey:"store",imageUrl:h.store,uz:"Yana bitta paket bering",reading:"яна битта пакет беринг",ru:"Дайте еще один пакет",exampleUz:"Iltimos, yana bitta paket bering.",exampleRu:"Пожалуйста, дайте еще один пакет."},{topicKey:"store",imageUrl:h.store,uz:"Qaytim bering, iltimos",reading:"кайтим беринг илтимос",ru:"Дайте сдачу, пожалуйста",exampleUz:"Menga qaytim bering, iltimos.",exampleRu:"Дайте мне сдачу, пожалуйста."},{topicKey:"store",imageUrl:h.store,uz:"Chegirma bormi?",reading:"чегирма борми",ru:"Есть скидка?",exampleUz:"Shu mahsulotga chegirma bormi?",exampleRu:"На этот товар есть скидка?"},{topicKey:"bazaar",imageUrl:h.bazaar,uz:"Yangi meva bormi?",reading:"янги мева борми",ru:"Есть свежие фрукты?",exampleUz:"Yangi olma va nok bormi?",exampleRu:"Есть свежие яблоки и груши?"},{topicKey:"bazaar",imageUrl:h.bazaar,uz:"Bir kilo bering",reading:"бир кило беринг",ru:"Дайте один килограмм",exampleUz:"Pomidordan bir kilo bering.",exampleRu:"Дайте килограмм помидоров."},{topicKey:"bazaar",imageUrl:h.bazaar,uz:"Yaxshisini tanlab bering",reading:"яхшисини танлаб беринг",ru:"Выберите получше",exampleUz:"Iltimos, yaxshisini tanlab bering.",exampleRu:"Пожалуйста, выберите получше."},{topicKey:"bazaar",imageUrl:h.bazaar,uz:"Yarim kilo ham bo‘ladimi?",reading:"ярим кило хам булади ми",ru:"Можно полкило?",exampleUz:"Pomidorlardan yarim kilo ham bo‘ladimi?",exampleRu:"Можно полкило помидоров?"},{topicKey:"bazaar",imageUrl:h.bazaar,uz:"Tarozida tortib bering",reading:"тарозида тортиб беринг",ru:"Взвесьте на весах",exampleUz:"Iltimos, tarozida tortib bering.",exampleRu:"Пожалуйста, взвесьте на весах."},{topicKey:"bazaar",imageUrl:h.bazaar,uz:"Bu juda qimmat ekan",reading:"бу жуда киммат экан",ru:"Это очень дорого",exampleUz:"Aka, bu juda qimmat ekan, arzonroq qiling.",exampleRu:"Это очень дорого, сделайте дешевле."},{topicKey:"bazaar",imageUrl:h.bazaar,uz:"Mayli, ikki kilo oling",reading:"майли икки кило олинг",ru:"Ладно, возьму два кило",exampleUz:"Mayli, olmalardan ikki kilo oling.",exampleRu:"Ладно, возьму два кило яблок."},{topicKey:"city",imageUrl:h.city,uz:"Bekat qayerda?",reading:"бекат қаерда",ru:"Где остановка?",exampleUz:"Shu avtobus bekati qayerda?",exampleRu:"Где эта автобусная остановка?"},{topicKey:"city",imageUrl:h.city,uz:"Shahar markaziga boradimi?",reading:"шаҳар марказига борадими",ru:"Едет в центр города?",exampleUz:"Bu marshrutka shahar markaziga boradimi?",exampleRu:"Эта маршрутка едет в центр?"},{topicKey:"city",imageUrl:h.city,uz:"Shu yerda tushaman",reading:"шу ерда тушаман",ru:"Я выхожу здесь",exampleUz:"Rahmat, shu yerda tushaman.",exampleRu:"Спасибо, я выхожу здесь."},{topicKey:"city",imageUrl:h.city,uz:"Taksiga tezroq borishim kerak",reading:"таксига тезрок боришим керак",ru:"Мне нужно быстрее доехать на такси",exampleUz:"Ishga kech qoldim, taksiga tezroq borishim kerak.",exampleRu:"Я опаздываю на работу, нужно быстрее доехать на такси."},{topicKey:"city",imageUrl:h.city,uz:"Manzilga qancha vaqtda yetamiz?",reading:"манзилга канча вактда етамиз",ru:"За сколько доедем до адреса?",exampleUz:"Markazdagi manzilga qancha vaqtda yetamiz?",exampleRu:"За сколько доедем до адреса в центре?"},{topicKey:"city",imageUrl:h.city,uz:"Iltimos, shu ko‘chadan buriling",reading:"илтимос шу кочадан бурилинг",ru:"Пожалуйста, поверните на этой улице",exampleUz:"Iltimos, keyingi svetofordan emas, shu ko‘chadan buriling.",exampleRu:"Пожалуйста, поверните на этой улице, не на следующем светофоре."},{topicKey:"city",imageUrl:h.city,uz:"Hisobni ilovada to‘layman",reading:"хисобни иловада тулайман",ru:"Оплачу через приложение",exampleUz:"Rahmat, hisobni ilovada to‘layman.",exampleRu:"Спасибо, оплачу через приложение."},{topicKey:"city",imageUrl:h.city,uz:"Iltimos, konditsionerni yoqing",reading:"илтимос кондиционерни ёкинг",ru:"Пожалуйста, включите кондиционер",exampleUz:"Issiq bo‘lyapti, iltimos, konditsionerni yoqing.",exampleRu:"Жарко, пожалуйста, включите кондиционер."},{topicKey:"city",imageUrl:h.city,uz:"Oynani biroz ochib qo‘ysak bo‘ladimi?",reading:"ойнани бироз очиб койсак булади ми",ru:"Можно немного открыть окно?",exampleUz:"Havo yo‘q ekan, oynani biroz ochib qo‘ysak bo‘ladimi?",exampleRu:"Душно, можно немного открыть окно?"},{topicKey:"city",imageUrl:h.city,uz:"Shu manzilda kutib turing",reading:"шу манзилда кутиб туринг",ru:"Подождите по этому адресу",exampleUz:"Men ikki daqiqada chiqaman, shu manzilda kutib turing.",exampleRu:"Я выйду через две минуты, подождите по этому адресу."},{topicKey:"city",imageUrl:h.city,uz:"Yo‘l tirband ekanmi?",reading:"йол тирбанд эканми",ru:"Пробка на дороге?",exampleUz:"Bugun markaz tomonda yo‘l tirband ekanmi?",exampleRu:"Сегодня в сторону центра пробка?"},{topicKey:"city",imageUrl:h.city,uz:"Aylanma yo‘ldan borsak tezroq bo‘ladimi?",reading:"айланма йулдан борсак тезрок булади ми",ru:"По объездной будет быстрее?",exampleUz:"Aylanma yo‘ldan borsak tezroq bo‘ladimi?",exampleRu:"По объездной будет быстрее?"},{topicKey:"city",imageUrl:h.city,uz:"Shu yerda to‘xtab turing",reading:"шу ерда тохтаб туринг",ru:"Остановитесь здесь",exampleUz:"Do‘kon oldida, shu yerda to‘xtab turing.",exampleRu:"У магазина, остановитесь здесь."},{topicKey:"neighbors",imageUrl:h.neighbors,uz:"Bugun havo issiq ekan",reading:"бугун ҳаво иссиқ экан",ru:"Сегодня жаркая погода",exampleUz:"Bugun havo issiq ekan, to‘g‘rimi?",exampleRu:"Сегодня жарко, правда?"},{topicKey:"neighbors",imageUrl:h.neighbors,uz:"Ishlar qalay?",reading:"ишлар қалай",ru:"Как дела?",exampleUz:"Assalomu alaykum, ishlar qalay?",exampleRu:"Здравствуйте, как дела?"},{topicKey:"neighbors",imageUrl:h.neighbors,uz:"Uyda hamma tinchmi?",reading:"уйда ҳамма тинчми",ru:"Дома все в порядке?",exampleUz:"Qo‘shni, uyda hamma tinchmi?",exampleRu:"Сосед, дома все в порядке?"},{topicKey:"neighbors",imageUrl:h.neighbors,uz:"Kechqurun choyga kiring",reading:"кечкирун чойга киринг",ru:"Зайдите вечером на чай",exampleUz:"Qo‘shni, kechqurun choyga kiring.",exampleRu:"Сосед, заходите вечером на чай."},{topicKey:"neighbors",imageUrl:h.neighbors,uz:"Bolalar hovlida o‘ynayapti",reading:"болалар ховлида уйнаяпти",ru:"Дети играют во дворе",exampleUz:"Bugun bolalar hovlida o‘ynayapti.",exampleRu:"Сегодня дети играют во дворе."},{topicKey:"neighbors",imageUrl:h.neighbors,uz:"Ertaga suv o‘chadimi?",reading:"эртага сув очадими",ru:"Завтра отключат воду?",exampleUz:"Qo‘shni, ertaga suv o‘chadimi?",exampleRu:"Сосед, завтра отключат воду?"},{topicKey:"neighbors",imageUrl:h.neighbors,uz:"Yordam kerak bo‘lsa, ayting",reading:"ёрдам керак болса айтинг",ru:"Если нужна помощь, скажите",exampleUz:"Ko‘chishda yordam kerak bo‘lsa, ayting.",exampleRu:"Если нужна помощь с переездом, скажите."},{topicKey:"family",imageUrl:h.family,uz:"Tabriklayman!",reading:"табриклайман",ru:"Поздравляю!",exampleUz:"Farzandingiz tug‘ilibdi, tabriklayman!",exampleRu:"У вас родился ребенок, поздравляю!"},{topicKey:"family",imageUrl:h.family,uz:"O‘g‘ilmi yo qizmi?",reading:"ўғилми ё қизми",ru:"Мальчик или девочка?",exampleUz:"Yangi tug‘ilgan bola o‘g‘ilmi yo qizmi?",exampleRu:"Новорожденный мальчик или девочка?"},{topicKey:"family",imageUrl:h.family,uz:"Baxtli bo‘linglar",reading:"бахтли бўлинглар",ru:"Будьте счастливы",exampleUz:"Oilangiz bilan baxtli bo‘linglar.",exampleRu:"Будьте счастливы с вашей семьей."}];function Ji(a,t,s,r=t,o=s){return{topicKey:a,imageUrl:h[a]||null,uz:t,reading:t,ru:s,exampleUz:r,exampleRu:o}}const $i={store:[["Bu mahsulot yangi","Этот товар новый"],["Bu mahsulot eski","Этот товар старый"],["Bu narx qimmat","Эта цена высокая"],["Bu narx arzon","Эта цена низкая"],["Menga sumka kerak","Мне нужен пакет"],["Yana bitta sumka bering","Дайте еще один пакет"],["Qaytim bering, iltimos","Дайте сдачу, пожалуйста"]],bazaar:[["Yarim kilo bering","Дайте полкило"],["Ikki kilo bering","Дайте два килограмма"],["Tarozida tortib bering","Взвесьте на весах"],["Bu meva shirin","Этот фрукт сладкий"],["Bu meva nordon","Этот фрукт кислый"],["Bu sabzavot yangi","Этот овощ свежий"],["Bu juda qimmat","Это очень дорого"],["Mayli, olaman","Ладно, беру"]],city:[["Yo‘l tirbandmi?","Есть пробка на дороге?"],["Aylanma yo‘ldan borsak tezroq bo‘ladimi?","По объездной будет быстрее?"]],neighbors:[["Kechqurun choyga kiring","Зайдите вечером на чай"],["Bolalar hovlida o‘ynayapti","Дети играют во дворе"],["Ertaga suv bo‘ladimi?","Завтра будет вода?"],["Bugun shamol kuchli","Сегодня сильный ветер"],["Bugun yomg‘ir bo‘ladimi?","Сегодня будет дождь?"],["Yordam kerak bo‘lsa, ayting","Если нужна помощь, скажите"],["Hamma yaxshi, rahmat","Все хорошо, спасибо"],["Qo‘shni, savol bor","Сосед, есть вопрос"]],family:[["Ota va ona uyda","Отец и мать дома"],["Aka ishda, opa uyda","Старший брат на работе, сестра дома"],["Bugun tug‘ilgan kun","Сегодня день рождения"],["Oila bilan bayram qilamiz","Празднуем с семьей"],["Farzand yaxshi, sog‘liq yaxshi","Ребенок в порядке, здоровье хорошее"],["Bolaga yordam kerak","Ребенку нужна помощь"],["O‘g‘il maktabda","Сын в школе"],["Qiz uyda","Дочь дома"],["Oilangizga rahmat","Спасибо вашей семье"],["Baxt va tinchlik tilayman","Желаю счастья и спокойствия"],["Kechqurun oila bilan choy","Вечером чай с семьей"],["Bugun hamma birga","Сегодня все вместе"]],pharmacy:[["Assalomu alaykum, yordam kerak","Здравствуйте, нужна помощь"],["Menga sog‘liq uchun dori kerak","Мне нужно лекарство для здоровья"],["Bosh og‘riq uchun dori bormi?","Есть лекарство от головной боли?"],["Yo‘tal uchun nima bor?","Что есть от кашля?"],["Harorat yuqori, nima qilish kerak?","Температура высокая, что делать?"],["Bu dori qachon ichiladi?","Когда принимать это лекарство?"],["Kuniga necha marta ichaman?","Сколько раз в день принимать?"],["Ovqatdan oldinmi yoki keyinmi?","До еды или после?"],["Bolaga ham bo‘ladimi?","Подойдет и ребенку?"],["Yana arzonroq variant bormi?","Есть вариант дешевле?"],["Retsept kerakmi?","Нужен рецепт?"],["Karta qabul qilasizmi?","Принимаете карту?"],["Naqd to‘lasam bo‘ladimi?","Можно оплатить наличными?"],["Rahmat, shu dorini olaman","Спасибо, беру это лекарство"],["Sog‘ bo‘ling","Будьте здоровы"]],clinic:[["Assalomu alaykum, ro‘yxatga yozilmoqchiman","Здравствуйте, хочу записаться"],["Bugun qabul bormi?","Сегодня есть прием?"],["Shifokor qachon bo‘sh bo‘ladi?","Когда врач будет свободен?"],["Navbat qayerda?","Где очередь?"],["Soat nechida kiraman?","Во сколько я зайду?"],["Menda harorat bor","У меня температура"],["Menda yo‘tal bor","У меня кашель"],["Menda bosh og‘riq bor","У меня болит голова"],["Qon tahlili kerakmi?","Нужен анализ крови?"],["Bugun natija bo‘ladimi?","Результат будет сегодня?"],["Ma’lumotnoma berasizmi?","Выдадите справку?"],["Keyingi qabul qachon?","Когда следующий прием?"],["Iltimos, tezroq bo‘lsa yaxshi","Пожалуйста, если можно побыстрее"],["Rahmat, tushundim","Спасибо, понял"],["Xayr, salomat bo‘ling","До свидания, будьте здоровы"]],cafe:[["Bo‘sh stol bormi?","Есть свободный стол?"],["Menyu bering, iltimos","Дайте меню, пожалуйста"],["Menga choy kerak","Мне нужен чай"],["Menga osh kerak","Мне нужен плов"],["Bu taom achchiqmi?","Это блюдо острое?"],["Achchiq bo‘lmasa yaxshi","Лучше не острое"],["Shakar bilan choy bering","Дайте чай с сахаром"],["Suv ham bering","И воду тоже"],["Yana bitta non bering","Дайте еще один хлеб"],["Qancha turadi?","Сколько стоит?"],["Hisobni bering, iltimos","Принесите счет, пожалуйста"],["Karta qabul qilasizmi?","Принимаете карту?"],["Naqd to‘layman","Оплачу наличными"],["Hammasi yaxshi, rahmat","Все хорошо, спасибо"],["Yana kelaman","Приду еще"]],housing:[["Uy ijaraga kerak","Нужно жилье в аренду"],["Bu uy katta","Этот дом большой"],["Bu uy kichik","Этот дом маленький"],["Manzil markazga yaqinmi?","Адрес близко к центру?"],["Ijara narxi qancha?","Сколько аренда?"],["Suv bor, elektr bor","Вода есть, электричество есть"],["Bugun suv yo‘q","Сегодня воды нет"],["Issiq suv qachon bo‘ladi?","Когда будет горячая вода?"],["Kalit bormi?","Есть ключ?"],["Qo‘shnilar tinchmi?","Соседи спокойные?"],["Ta’mir kerak bo‘lsa, kimga aytamiz?","Если нужен ремонт, кому сказать?"],["Xona toza va yaxshi","Комната чистая и хорошая"],["Bugun ko‘rishga kelsam bo‘ladimi?","Можно прийти посмотреть сегодня?"],["Mayli, shu uy menga mos","Хорошо, этот дом мне подходит"],["Shartnoma qachon qilamiz?","Когда оформим договор?"]],taxi:[["Taksi kerak, iltimos","Нужно такси, пожалуйста"],["Manzilga tezroq boraylik","Давайте быстрее доедем до адреса"],["Yo‘l tirband ekan","Похоже, на дороге пробка"],["Boshqa yo‘ldan borsak bo‘ladimi?","Можно поехать другой дорогой?"],["Aylanma yo‘l yaxshiroqmi?","Объездная лучше?"],["Shu yerda bir daqiqa kuting","Подождите здесь одну минуту"],["Oldin do‘konga, keyin uyga","Сначала в магазин, потом домой"],["Yana bitta manzil bor","Есть еще один адрес"],["Shu ko‘chadan o‘ngga buriling","Поверните направо на этой улице"],["Keyin chapga buriling","Потом поверните налево"],["Shu yerda to‘xtang","Остановитесь здесь"],["Qancha bo‘ldi?","Сколько вышло?"],["Hisobni ilovada to‘layman","Оплачу через приложение"],["Rahmat, yaxshi haydadingiz","Спасибо, хорошо вели"],["Xayr, yaxshi kun","До свидания, хорошего дня"]],transport:[["Bekat qayerda?","Где остановка?"],["Bu avtobus markazga boradimi?","Этот автобус едет в центр?"],["Metro kirish qayerda?","Где вход в метро?"],["Qaysi yo‘nalish kerak?","Какой маршрут нужен?"],["Keyingi bekat qaysi?","Какая следующая остановка?"],["Bu yerda tushaman","Я выхожу здесь"],["Bir bekat oldin ayting","Скажите за одну остановку"],["Qayta o‘tish kerakmi?","Нужна пересадка?"],["Marshrutka tezroqmi?","Маршрутка быстрее?"],["Metro sekinroq, lekin arzon","Метро медленнее, но дешевле"],["Yo‘l haqi qancha?","Сколько стоит проезд?"],["Karta bilan to‘lash mumkinmi?","Можно оплатить картой?"],["Bugun transport kechikdimi?","Сегодня транспорт задержался?"],["Rahmat, tushundim","Спасибо, понял"],["Xayr, yaxshi yo‘l","До свидания, счастливого пути"]],work:[["Bugun ish bor","Сегодня есть работа"],["Soat nechida boshlaymiz?","Во сколько начинаем?"],["Men biroz kech qolaman","Я немного опоздаю"],["Bugun yig‘ilish bormi?","Сегодня есть встреча?"],["Vazifa nima?","Какая задача?"],["Hujjat tayyormi?","Документ готов?"],["Bu ish muhim","Эта работа важная"],["Bu ish tez kerak","Эта работа нужна срочно"],["Men tushundim, qilaman","Я понял, сделаю"],["Yordam kerak bo‘lsa ayting","Если нужна помощь, скажите"],["Tanaffus qachon?","Когда перерыв?"],["Bugun vaqt kam","Сегодня мало времени"],["Ertaga davom etamiz","Завтра продолжим"],["Rahmat, yaxshi ishladik","Спасибо, хорошо поработали"],["Xayr, ertaga ko‘rishamiz","До свидания, увидимся завтра"]],bank:[["Bank qayerda?","Где банк?"],["Menga karta kerak","Мне нужна карта"],["Karta ishlamayapti","Карта не работает"],["Pul yechmoqchiman","Хочу снять деньги"],["Pul o‘tkazmoqchiman","Хочу сделать перевод"],["Komissiya qancha?","Какая комиссия?"],["Balansni tekshirib bering","Проверьте баланс"],["Naqd pul bormi?","Есть наличные деньги?"],["Terminal ishlayaptimi?","Терминал работает?"],["To‘lov o‘tmadi","Платеж не прошел"],["Yana bir marta urinib ko‘raylik","Давайте попробуем еще раз"],["Pasport kerakmi?","Нужен паспорт?"],["Imzo qayerga qo‘yaman?","Где поставить подпись?"],["Rahmat, hammasi tushunarli","Спасибо, все понятно"],["Xayr, yaxshi kun","До свидания, хорошего дня"]],school:[["Bola bog‘chada","Ребенок в садике"],["Bola maktabda","Ребенок в школе"],["Dars soat nechida?","Во сколько урок?"],["Bugun ota-ona yig‘ilishi bormi?","Сегодня есть родительское собрание?"],["Ustoz bilan gaplashmoqchiman","Хочу поговорить с учителем"],["Uyga vazifa bormi?","Есть домашнее задание?"],["Bola bugun sal kasal","Ребенок сегодня немного болеет"],["Ma’lumotnoma kerak","Нужна справка"],["Ertaga dars bo‘ladimi?","Завтра будут занятия?"],["Sinf qayerda?","Где класс?"],["Maktabga yaqin uy kerak","Нужно жилье рядом со школой"],["Bola yaxshi o‘qiyapti","Ребенок хорошо учится"],["Rahmat, ustoz","Спасибо, учитель"],["Kechqurun qayta gaplashamiz","Вечером еще поговорим"],["Xayr, ko‘rishguncha","До свидания, до встречи"]],repair:[["Telefon ishlamayapti","Телефон не работает"],["Ta’mir kerak","Нужен ремонт"],["Qachon tayyor bo‘ladi?","Когда будет готово?"],["Bu ish qancha turadi?","Сколько это стоит?"],["Bugun topshirsam bo‘ladimi?","Можно сдать сегодня?"],["Ertaga olib ketsam bo‘ladimi?","Можно забрать завтра?"],["Kafolat bormi?","Есть гарантия?"],["Original detal bormi?","Есть оригинальная деталь?"],["Arzonroq variant bormi?","Есть вариант дешевле?"],["Iltimos, tezroq qiling","Пожалуйста, сделайте быстрее"],["Oldin tekshirib bering","Сначала проверьте"],["Muammo nimada?","В чем проблема?"],["Rahmat, yaxshi bo‘ldi","Спасибо, получилось хорошо"],["To‘lovni karta bilan qilaman","Оплачу картой"],["Xayr, yana kelaman","До свидания, приду снова"]],delivery:[["Posilka qayerda?","Где посылка?"],["Kuryer qachon keladi?","Когда приедет курьер?"],["Manzilni to‘g‘ri yozdimmi?","Я правильно указал адрес?"],["Manzilni qayta aytaman","Сейчас повторю адрес"],["Uy oldida kuting, iltimos","Подождите у дома, пожалуйста"],["Telefon qilsangiz yaxshi","Лучше позвоните"],["Topshirish kodi bor","Есть код получения"],["Olib ketish joyi qayerda?","Где пункт самовывоза?"],["Bugun olib ketsam bo‘ladimi?","Можно забрать сегодня?"],["To‘lov oldindan qilingan","Оплата сделана заранее"],["Naqd to‘lasam ham bo‘ladimi?","Можно оплатить наличными?"],["Posilka butunmi?","Посылка целая?"],["Rahmat, oldim","Спасибо, получил"],["Yana yetkazib berish kerak bo‘ladi","Еще понадобится доставка"],["Xayr, yaxshi kun","До свидания, хорошего дня"]],documents:[["Ro‘yxatdan o‘tmoqchiman","Хочу зарегистрироваться"],["Qaysi hujjat kerak?","Какой документ нужен?"],["Pasport nusxasi kerakmi?","Нужна копия паспорта?"],["Aslini ham olib kelaymi?","Оригинал тоже принести?"],["Ariza qayerda yoziladi?","Где заполняется заявление?"],["Imzo qayerga qo‘yiladi?","Где ставится подпись?"],["Navbat raqami qayerda?","Где номер очереди?"],["Mening navbatim qachon?","Когда моя очередь?"],["Bugun topshirsam bo‘ladimi?","Можно подать сегодня?"],["Natija qachon chiqadi?","Когда будет результат?"],["Ma’lumotnoma tayyormi?","Справка готова?"],["Bitta nusxa bering","Дайте один экземпляр"],["Yana qanday qog‘oz kerak?","Какие еще бумаги нужны?"],["Rahmat, hammasi tushunarli","Спасибо, все понятно"],["Xayr, yaxshi kun","До свидания, хорошего дня"]]},Vi=Object.entries($i).flatMap(([a,t])=>t.map(([s,r,o,m])=>Ji(a,s,r,o||s,m||r))),aa=[...Xi,...Vi],Ka=15,Ba=aa.reduce((a,t)=>(a[t.topicKey]=(a[t.topicKey]||0)+1,a),{});$a.forEach(a=>{if((Ba[a.key]||0)!==Ka)throw new Error(`Topic "${a.key}" must have exactly ${Ka} phrases, got ${Ba[a.key]||0}`)});const Zi=[[1,"neighbors","ha","ха","да"],[1,"neighbors","yo‘q","йок","нет"],[1,"neighbors","men","мен","я"],[1,"neighbors","sen","сен","ты"],[1,"neighbors","siz","сиз","вы"],[1,"neighbors","u","у","он/она"],[1,"neighbors","biz","биз","мы"],[1,"neighbors","ular","улар","они"],[1,"neighbors","bu","бу","это"],[1,"neighbors","ana","ана","вон тот"],[1,"neighbors","qayerda","каерда","где"],[1,"neighbors","qachon","качон","когда"],[1,"neighbors","nega","нега","почему"],[1,"neighbors","kim","ким","кто"],[1,"neighbors","nima","нима","что"],[1,"neighbors","qanday","кандай","как/какой"],[1,"neighbors","bugun","бугун","сегодня"],[1,"neighbors","ertaga","ертага","завтра"],[1,"neighbors","kecha","кеча","вчера"],[1,"neighbors","hozir","хозир","сейчас"],[1,"neighbors","ertalab","эрталаб","утром"],[1,"neighbors","kechqurun","кечкирун","вечером"],[1,"neighbors","kun","кун","день"],[1,"neighbors","hafta","хафта","неделя"],[1,"neighbors","oy","ой","месяц"],[1,"neighbors","yil","йил","год"],[1,"neighbors","bir","бир","один"],[1,"neighbors","ikki","икки","два"],[1,"neighbors","uch","уч","три"],[1,"neighbors","to‘rt","торт","четыре"],[1,"neighbors","besh","беш","пять"],[1,"neighbors","olti","олти","шесть"],[1,"neighbors","yetti","етти","семь"],[1,"neighbors","sakkiz","саккиз","восемь"],[1,"neighbors","to‘qqiz","токкиз","девять"],[1,"neighbors","o‘n","он","десять"],[1,"neighbors","rahmat","рахмат","спасибо"],[1,"neighbors","iltimos","илтимос","пожалуйста"],[1,"neighbors","kechirasiz","кечирасиз","извините"],[1,"neighbors","salom","салом","привет"],[2,"store","non","нон","хлеб"],[2,"store","sut","сут","молоко"],[2,"store","suv","сув","вода"],[2,"store","choy","чой","чай"],[2,"store","qahva","кахва","кофе"],[2,"store","tuz","туз","соль"],[2,"store","shakar","шакар","сахар"],[2,"store","guruch","гуруч","рис"],[2,"store","go‘sht","гошт","мясо"],[2,"store","tovuq","товук","курица"],[2,"store","baliq","балик","рыба"],[2,"store","yog‘","йог","масло"],[2,"store","tuxum","тухум","яйцо"],[2,"store","pishloq","пишлок","сыр"],[2,"store","qatiq","катик","кефир"],[2,"store","do‘kon","докон","магазин"],[2,"store","sotuvchi","сотувчи","продавец"],[2,"store","narx","нарх","цена"],[2,"store","pul","пул","деньги"],[2,"store","naqd","накд","наличные"],[2,"store","karta","карта","карта"],[2,"store","sumka","сумка","сумка"],[2,"store","kiyim","кийим","одежда"],[2,"store","ko‘ylak","койлак","рубашка"],[2,"store","shim","шим","брюки"],[2,"store","oyoq-kiyim","оёк-кийим","обувь"],[2,"store","katta","катта","большой"],[2,"store","kichik","кичик","маленький"],[2,"store","yangi","янги","новый"],[2,"store","eski","эски","старый"],[2,"store","yaxshi","яхши","хороший"],[2,"store","yomon","ёмон","плохой"],[2,"store","qimmat","киммат","дорогой"],[2,"store","arzon","арзон","дешевый"],[2,"store","toza","тоза","чистый"],[2,"store","iflos","ифлос","грязный"],[3,"bazaar","olma","олма","яблоко"],[3,"bazaar","nok","нок","груша"],[3,"bazaar","banan","банан","банан"],[3,"bazaar","uzum","узум","виноград"],[3,"bazaar","shaftoli","шафтоли","персик"],[3,"bazaar","o‘rik","урик","абрикос"],[3,"bazaar","tarvuz","тарвуз","арбуз"],[3,"bazaar","qovun","ковун","дыня"],[3,"bazaar","pomidor","помидор","помидор"],[3,"bazaar","bodring","бодринг","огурец"],[3,"bazaar","piyoz","пиёз","лук"],[3,"bazaar","kartoshka","картошка","картофель"],[3,"bazaar","sabzi","сабзи","морковь"],[3,"bazaar","karam","карам","капуста"],[3,"bazaar","qalampir","калампир","перец"],[3,"bazaar","sarimsoq","саримсок","чеснок"],[3,"bazaar","ko‘kat","кокат","зелень"],[3,"bazaar","meva","мева","фрукты"],[3,"bazaar","sabzavot","сабзавот","овощи"],[3,"bazaar","bozor","бозор","базар"],[3,"bazaar","tarozi","тарози","весы"],[3,"bazaar","kilo","кило","килограмм"],[3,"bazaar","yarim","ярим","половина"],[3,"bazaar","dona","дона","штука"],[3,"bazaar","yaxshiroq","яхширок","получше"],[3,"bazaar","pishgan","пишган","спелый"],[3,"bazaar","xom","хом","незрелый"],[3,"bazaar","shirin","ширин","сладкий"],[3,"bazaar","nordon","нордон","кислый"],[3,"bazaar","achchiq","аччик","острый"],[3,"bazaar","yumshoq","юмшок","мягкий"],[3,"bazaar","qattiq","каттик","твердый"],[4,"city","uy","уй","дом"],[4,"city","ko‘cha","коча","улица"],[4,"city","mahalla","махалла","квартал/махалля"],[4,"city","shahar","шахар","город"],[4,"city","markaz","марказ","центр"],[4,"city","bekat","бекат","остановка"],[4,"city","avtobus","автобус","автобус"],[4,"city","metro","метро","метро"],[4,"city","marshrutka","маршрутка","маршрутка"],[4,"city","taksi","такси","такси"],[4,"city","yo‘l","йол","дорога"],[4,"city","burilish","бурилиш","поворот"],[4,"city","o‘ng","онг","право"],[4,"city","chap","чап","лево"],[4,"city","to‘g‘ri","тогри","прямо"],[4,"city","yaqin","якин","близко"],[4,"city","uzoq","узок","далеко"],[4,"city","tez","тез","быстро"],[4,"city","sekin","секин","медленно"],[4,"city","ish","иш","работа"],[4,"city","bo‘sh","бош","свободный"],[4,"city","vaqt","вакт","время"],[4,"city","soat","соат","час"],[4,"city","daqiqa","дакика","минута"],[4,"city","kirish","кириш","вход"],[4,"city","chiqish","чикиш","выход"],[4,"city","past","паст","вниз"],[4,"city","yuqori","юкори","вверх"],[4,"city","oldin","олдин","раньше/впереди"],[4,"city","keyin","кейин","позже/после"],[4,"city","o‘tish","утиш","переход"],[4,"city","manzil","манзил","адрес"],[5,"neighbors","issiq","иссик","жарко"],[5,"neighbors","sovuq","совук","холодно"],[5,"neighbors","salqin","салкин","прохладно"],[5,"neighbors","shamol","шамол","ветер"],[5,"neighbors","yomg‘ir","ёмгир","дождь"],[5,"neighbors","qor","кор","снег"],[5,"neighbors","quyosh","куёш","солнце"],[5,"neighbors","bulut","булут","облако"],[5,"neighbors","osmon","осмон","небо"],[5,"neighbors","ob-havo","об-хаво","погода"],[5,"neighbors","qo‘shni","кошни","сосед"],[5,"neighbors","do‘st","дост","друг"],[5,"neighbors","tanish","таниш","знакомый"],[5,"neighbors","mehmon","мехмон","гость"],[5,"neighbors","yordam","ёрдам","помощь"],[5,"neighbors","savol","савол","вопрос"],[5,"neighbors","javob","жавоб","ответ"],[5,"neighbors","gap","гап","разговор/слово"],[5,"neighbors","til","тил","язык"],[5,"neighbors","o‘rganish","органиш","изучение"],[5,"neighbors","tushunish","тушуниш","понимание"],[5,"neighbors","eslash","эслаш","вспоминать"],[5,"neighbors","aytish","айтиш","сказать"],[5,"neighbors","eshitish","эшитиш","слышать"],[5,"neighbors","ko‘rish","кориш","видеть"],[5,"neighbors","bilish","билиш","знать"],[5,"neighbors","xohlamoq","хохламок","хотеть"],[5,"neighbors","kerak","керак","нужно"],[5,"neighbors","mumkin","мумкин","можно"],[5,"neighbors","bo‘ladi","болади","будет/можно"],[5,"neighbors","bo‘lmaydi","болмайди","нельзя/не будет"],[6,"family","ota","ота","отец"],[6,"family","ona","она","мать"],[6,"family","aka","ака","старший брат"],[6,"family","uka","ука","младший брат"],[6,"family","opa","опа","старшая сестра"],[6,"family","singil","сингил","младшая сестра"],[6,"family","er","эр","муж"],[6,"family","xotin","хотин","жена"],[6,"family","bola","бола","ребенок"],[6,"family","o‘g‘il","огил","сын"],[6,"family","qiz","киз","дочь/девушка"],[6,"family","nabira","набира","внук/внучка"],[6,"family","oila","оила","семья"],[6,"family","to‘y","той","свадьба"],[6,"family","bayram","байрам","праздник"],[6,"family","tabrik","табрик","поздравление"],[6,"family","tug‘ilgan kun","тугилган кун","день рождения"],[6,"family","sog‘liq","соглик","здоровье"],[6,"family","baxt","бахт","счастье"],[6,"family","tinchlik","тинчлик","мир/спокойствие"],[6,"family","ishlamoq","ишламок","работать"],[6,"family","yashamoq","яшамок","жить"],[6,"family","bor","бор","есть/имеется"],[6,"family","yo‘q","йок","нет/отсутствует"],[6,"family","bermoq","бермок","давать"],[6,"family","olmoq","олмок","брать"],[6,"family","kelmoq","келмок","приходить"],[6,"family","bormoq","бормок","идти/ехать"],[6,"family","o‘tirmoq","утирмок","сидеть"],[6,"family","turmoq","турмок","стоять/жить"],[6,"family","uxlamoq","ухламок","спать"],[6,"family","ovqat","овкат","еда"]],ia=Zi.map(([a,t,s,r,o])=>({level:a,topicKey:t,uz:s,reading:r,ru:o})),et=[{uz:"bu {uz}",ru:"это {ru}",levelBoost:0},{uz:"yangi {uz}",ru:"новый {ru}",levelBoost:0},{uz:"katta {uz}",ru:"большой {ru}",levelBoost:1},{uz:"kichik {uz}",ru:"маленький {ru}",levelBoost:1},{uz:"{uz} bor",ru:"есть {ru}",levelBoost:2},{uz:"{uz} yo‘q",ru:"нет {ru}",levelBoost:2},{uz:"{uz} kerak",ru:"нужен {ru}",levelBoost:3},{uz:"{uz} qayerda?",ru:"где {ru}?",levelBoost:3},{uz:"menga {uz} kerak",ru:"мне нужен {ru}",levelBoost:4},{uz:"bizga {uz} kerak",ru:"нам нужен {ru}",levelBoost:4},{uz:"shu {uz} yaxshi",ru:"этот {ru} хороший",levelBoost:5},{uz:"shu {uz} yomon",ru:"этот {ru} плохой",levelBoost:5}],at=ia.filter(a=>!a.uz.includes(" "));function it(a){const t=[];return a.forEach(s=>{et.forEach(r=>{const o=Math.min(18,Math.max(7,Number(s.level)+5+r.levelBoost));t.push({level:o,topicKey:s.topicKey,uz:r.uz.replace("{uz}",s.uz),reading:r.uz.replace("{uz}",s.reading),ru:r.ru.replace("{ru}",s.ru)})})}),t}const Va=it(at),Za=[{level:2,topicKey:"neighbors",uz:"assalomu",reading:"ассалому",ru:"мир вам"},{level:2,topicKey:"neighbors",uz:"alaykum",reading:"алейкум",ru:"и вам мир"},{level:2,topicKey:"store",uz:"bering",reading:"беринг",ru:"дайте"},{level:2,topicKey:"store",uz:"bormi",reading:"борми",ru:"есть ли"},{level:2,topicKey:"store",uz:"qancha",reading:"канча",ru:"сколько"},{level:2,topicKey:"store",uz:"turadi",reading:"туради",ru:"стоит"},{level:3,topicKey:"store",uz:"arzonroq",reading:"арзонрок",ru:"подешевле"},{level:3,topicKey:"store",uz:"qabul",reading:"қабул",ru:"прием"},{level:3,topicKey:"store",uz:"qilasizmi",reading:"қиласизми",ru:"вы делаете?"},{level:3,topicKey:"store",uz:"iloji",reading:"иложи",ru:"возможность"},{level:3,topicKey:"store",uz:"bo‘lsa",reading:"болса",ru:"если будет"},{level:3,topicKey:"store",uz:"yoki",reading:"ёки",ru:"или"},{level:3,topicKey:"store",uz:"faqat",reading:"фақат",ru:"только"},{level:3,topicKey:"store",uz:"naqdmi",reading:"накдми",ru:"наличными?"},{level:3,topicKey:"bazaar",uz:"va",reading:"ва",ru:"и"},{level:3,topicKey:"neighbors",uz:"shu",reading:"шу",ru:"этот/эта"},{level:3,topicKey:"bazaar",uz:"yaxshisini",reading:"яхшисини",ru:"лучший (вин.)"},{level:3,topicKey:"bazaar",uz:"tanlab",reading:"танлаб",ru:"выбрав"},{level:3,topicKey:"bazaar",uz:"pomidordan",reading:"помидордан",ru:"из помидоров"},{level:4,topicKey:"city",uz:"markaziga",reading:"марказига",ru:"в центр"},{level:4,topicKey:"city",uz:"boradimi",reading:"борадими",ru:"идет ли/едет ли"},{level:4,topicKey:"city",uz:"yerda",reading:"ерда",ru:"здесь/в месте"},{level:4,topicKey:"city",uz:"tushaman",reading:"тушаман",ru:"выхожу"},{level:4,topicKey:"city",uz:"bekati",reading:"бекати",ru:"остановка (его)"},{level:5,topicKey:"neighbors",uz:"havo",reading:"ҳаво",ru:"воздух/погода"},{level:5,topicKey:"neighbors",uz:"ekan",reading:"экан",ru:"оказывается"},{level:5,topicKey:"neighbors",uz:"ishlar",reading:"ишлар",ru:"дела"},{level:5,topicKey:"neighbors",uz:"qalay",reading:"қалай",ru:"как"},{level:5,topicKey:"neighbors",uz:"uyda",reading:"уйда",ru:"дома"},{level:5,topicKey:"neighbors",uz:"hamma",reading:"ҳамма",ru:"все"},{level:5,topicKey:"neighbors",uz:"tinchmi",reading:"тинчми",ru:"все спокойно?"},{level:5,topicKey:"neighbors",uz:"to‘g‘rimi",reading:"тўғрими",ru:"правильно?"},{level:6,topicKey:"family",uz:"tabriklayman",reading:"табриклайман",ru:"поздравляю"},{level:6,topicKey:"family",uz:"o‘g‘ilmi",reading:"ўғилми",ru:"мальчик?"},{level:6,topicKey:"family",uz:"yo",reading:"ё",ru:"или"},{level:6,topicKey:"family",uz:"qizmi",reading:"қизми",ru:"девочка?"},{level:6,topicKey:"family",uz:"baxtli",reading:"бахтли",ru:"счастливый"},{level:6,topicKey:"family",uz:"bo‘linglar",reading:"бўлинглар",ru:"будьте (мн.)"},{level:6,topicKey:"family",uz:"farzandingiz",reading:"фарзандингиз",ru:"ваш ребенок"},{level:6,topicKey:"family",uz:"tug‘ilibdi",reading:"туғилибди",ru:"родился/родилась"},{level:6,topicKey:"family",uz:"tug‘ilgan",reading:"туғилган",ru:"рожденный"},{level:6,topicKey:"family",uz:"oilangiz",reading:"оилангиз",ru:"ваша семья"},{level:6,topicKey:"family",uz:"bilan",reading:"билан",ru:"с"}];function Fa(a){return(a.toLowerCase().match(/[a-z\u00c0-\u024f\u0400-\u04ffʻ’'`-]+/gi)||[]).map(t=>t.toLowerCase())}function tt(a,t){const s=new Set;t.forEach(o=>{Fa(o.uz).forEach(m=>s.add(m))});const r=new Map;return a.forEach(o=>{const m=`${o.uz} ${o.exampleUz}`;Fa(m).forEach(u=>{!s.has(u)&&!r.has(u)&&r.set(u,{level:7,topicKey:o.topicKey,uz:u,reading:u,ru:u})})}),Array.from(r.values())}const st=tt(aa,[...ia,...Va,...Za]),Ve=new Map;[...ia,...Va,...Za,...st].forEach(a=>{const t=a.uz+"::"+a.ru;Ve.has(t)||Ve.set(t,a)});const rt=Array.from(Ve.values()),je="uzlang-db-v1";let He,F;function D(a=new Date){return new Date(a.getFullYear(),a.getMonth(),a.getDate()).toISOString().slice(0,10)}function ei(a,t){const s=new Date(a);return s.setDate(s.getDate()+t),D(s)}function me(a,t){const s=new Date(a);return s.setDate(s.getDate()+t),s}function nt(a){const t=[],r=me(new Date,-(a-1));for(let o=0;o<a;o+=1)t.push(D(me(r,o)));return t}function ot(a){const t=a.getUTCDay()||7,s=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()));return s.setUTCDate(s.getUTCDate()-t+1),s}function ai(a){const t=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()));t.setUTCDate(t.getUTCDate()+4-(t.getUTCDay()||7));const s=new Date(Date.UTC(t.getUTCFullYear(),0,1)),r=Math.ceil(((t-s)/864e5+1)/7);return t.getUTCFullYear()+"-W"+String(r).padStart(2,"0")}function lt(a){const t=[],r=ot(new Date);for(let o=a-1;o>=0;o-=1){const m=me(r,-o*7);t.push({key:ai(m),label:m.toISOString().slice(5,10),startDate:m.toISOString().slice(0,10)})}return t}async function ii(){return He||(He=Qi({locateFile:()=>Gi})),He}function ge(a){const t=a.export(),s=Array.from(t);localStorage.setItem(je,JSON.stringify(s))}function Q(a,t,s=[]){const r=a.prepare(t);r.bind(s),r.step(),r.free()}function y(a,t,s=[]){const r=a.prepare(t);r.bind(s);const o=[];for(;r.step();)o.push(r.getAsObject());return r.free(),o}function ct(a){a.run(`
    CREATE TABLE IF NOT EXISTS topics (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      topic_key TEXT UNIQUE NOT NULL,
      title TEXT NOT NULL,
      description TEXT NOT NULL
    );

    CREATE TABLE IF NOT EXISTS cards (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      topic_id INTEGER NOT NULL,
      uz TEXT NOT NULL,
      reading TEXT NOT NULL,
      ru TEXT NOT NULL,
      example_uz TEXT NOT NULL,
      example_ru TEXT NOT NULL,
      image_url TEXT,
      FOREIGN KEY (topic_id) REFERENCES topics (id)
    );

    CREATE TABLE IF NOT EXISTS progress (
      card_id INTEGER PRIMARY KEY,
      easiness REAL NOT NULL DEFAULT 2.5,
      interval_days INTEGER NOT NULL DEFAULT 1,
      repetitions INTEGER NOT NULL DEFAULT 0,
      next_review TEXT NOT NULL,
      last_score INTEGER,
      FOREIGN KEY (card_id) REFERENCES cards (id)
    );

    CREATE TABLE IF NOT EXISTS words (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      topic_id INTEGER NOT NULL,
      level INTEGER NOT NULL,
      uz TEXT NOT NULL,
      reading TEXT NOT NULL,
      ru TEXT NOT NULL,
      image_url TEXT,
      FOREIGN KEY (topic_id) REFERENCES topics (id)
    );

    CREATE TABLE IF NOT EXISTS word_progress (
      word_id INTEGER PRIMARY KEY,
      easiness REAL NOT NULL DEFAULT 2.5,
      interval_days INTEGER NOT NULL DEFAULT 1,
      repetitions INTEGER NOT NULL DEFAULT 0,
      next_review TEXT NOT NULL,
      last_score INTEGER,
      FOREIGN KEY (word_id) REFERENCES words (id)
    );

    CREATE TABLE IF NOT EXISTS word_quiz_results (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      level INTEGER NOT NULL,
      score INTEGER NOT NULL,
      total INTEGER NOT NULL,
      is_success INTEGER NOT NULL,
      created_at TEXT NOT NULL
    );

    CREATE TABLE IF NOT EXISTS word_review_events (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      word_id INTEGER NOT NULL,
      score INTEGER NOT NULL,
      created_at TEXT NOT NULL,
      FOREIGN KEY (word_id) REFERENCES words (id)
    );
    CREATE UNIQUE INDEX IF NOT EXISTS idx_words_unique ON words (uz, ru);
  `)}function dt(a){a.run("BEGIN;"),$a.forEach(r=>{Q(a,"INSERT OR IGNORE INTO topics (topic_key, title, description) VALUES (?, ?, ?);",[r.key,r.title,r.description])});const t=y(a,"SELECT id, topic_key FROM topics;"),s=new Map(t.map(r=>[r.topic_key,r.id]));aa.forEach(r=>{Q(a,`INSERT INTO cards (topic_id, uz, reading, ru, example_uz, example_ru, image_url)
       SELECT ?, ?, ?, ?, ?, ?, ?
       WHERE NOT EXISTS (
         SELECT 1
         FROM cards
         WHERE topic_id = ? AND uz = ? AND ru = ?
       );`,[s.get(r.topicKey),r.uz,r.reading,r.ru,r.exampleUz,r.exampleRu,r.imageUrl||h[r.topicKey]||null,s.get(r.topicKey),r.uz,r.ru])}),a.run("COMMIT;")}function ut(a){const t=y(a,"SELECT id, topic_key FROM topics;"),s=new Map(t.map(r=>[r.topic_key,r.id]));a.run("BEGIN;"),rt.forEach(r=>{const o=s.get(r.topicKey);o&&Q(a,`INSERT OR IGNORE INTO words
        (topic_id, level, uz, reading, ru, image_url)
       VALUES (?, ?, ?, ?, ?, ?);`,[o,Number(r.level),r.uz,r.reading,r.ru,h[r.topicKey]||null])}),a.run("COMMIT;")}function ht(a){Object.entries(h).forEach(([s,r])=>{Q(a,`UPDATE cards
       SET image_url = ?
       WHERE image_url IS NULL
         AND topic_id IN (SELECT id FROM topics WHERE topic_key = ?);`,[r,s]),Q(a,`UPDATE words
       SET image_url = ?
       WHERE image_url IS NULL
         AND topic_id IN (SELECT id FROM topics WHERE topic_key = ?);`,[r,s])})}async function I(){if(F)return F;const a=await ii(),t=localStorage.getItem(je);return t?F=new a.Database(Uint8Array.from(JSON.parse(t))):F=new a.Database,ct(F),dt(F),ut(F),ht(F),ge(F),F}async function mt(){const a=await I();return y(a,"SELECT id, topic_key AS topicKey, title, description FROM topics ORDER BY id;")}async function gt(a){const t=await I();return y(t,`SELECT id, uz, reading, ru, example_uz AS exampleUz, example_ru AS exampleRu,
            image_url AS imageUrl
     FROM cards
     WHERE topic_id = ?
     ORDER BY id;`,[a])}async function yt(a=20){const t=await I(),s=D();return y(t,`SELECT c.id, c.uz, c.reading, c.ru, c.example_uz AS exampleUz, c.example_ru AS exampleRu,
            c.image_url AS imageUrl,
            t.title AS topicTitle,
            p.next_review AS nextReview
     FROM cards c
     JOIN topics t ON c.topic_id = t.id
     LEFT JOIN progress p ON p.card_id = c.id
     WHERE p.next_review IS NULL OR p.next_review <= ?
     ORDER BY COALESCE(p.next_review, ?) ASC, c.id ASC
     LIMIT ?;`,[s,s,a])}async function pt(a,t=10){const s=await I();return y(s,`SELECT id, uz, reading, ru, example_uz AS exampleUz, example_ru AS exampleRu,
            image_url AS imageUrl
     FROM cards
     WHERE topic_id = ?
     ORDER BY RANDOM()
     LIMIT ?;`,[a,t])}async function xt(a,t){const s=await I(),r=D(),o=y(s,"SELECT easiness, interval_days AS intervalDays, repetitions FROM progress WHERE card_id = ?;",[a]);let m=2.5,u=1,x=0;o.length>0&&(m=Number(o[0].easiness),u=Number(o[0].intervalDays),x=Number(o[0].repetitions)),t<3?(x=0,u=1):(x+=1,x===1?u=1:x===2?u=3:u=Math.max(1,Math.round(u*m))),m=Math.max(1.3,m+(.1-(5-t)*(.08+(5-t)*.02)));const w=ei(r,u);return Q(s,`INSERT INTO progress
      (card_id, easiness, interval_days, repetitions, next_review, last_score)
     VALUES (?, ?, ?, ?, ?, ?)
     ON CONFLICT(card_id) DO UPDATE SET
      easiness = excluded.easiness,
      interval_days = excluded.interval_days,
      repetitions = excluded.repetitions,
      next_review = excluded.next_review,
      last_score = excluded.last_score;`,[a,m,u,x,w,t]),ge(s),{nextReview:w,intervalDays:u,repetitions:x}}async function bt(){const a=await I(),[{total:t}]=y(a,"SELECT COUNT(*) AS total FROM words;"),s=y(a,"SELECT level, COUNT(*) AS count FROM words GROUP BY level ORDER BY level;");return{total:Number(t),byLevel:s.map(r=>({level:Number(r.level),count:Number(r.count)}))}}async function Pa(a,t=200){const s=await I();return y(s,`SELECT w.id, w.level, w.uz, w.reading, w.ru, w.image_url AS imageUrl,
            t.title AS topicTitle
     FROM words w
     JOIN topics t ON w.topic_id = t.id
     WHERE w.level = ?
     ORDER BY w.level ASC, w.id ASC
     LIMIT ?;`,[a,t])}async function vt(a,t=30){const s=await I(),r=D();return y(s,`SELECT w.id, w.level, w.uz, w.reading, w.ru, w.image_url AS imageUrl,
            t.title AS topicTitle,
            wp.next_review AS nextReview
     FROM words w
     JOIN topics t ON w.topic_id = t.id
     LEFT JOIN word_progress wp ON wp.word_id = w.id
     WHERE w.level = ?
       AND (wp.next_review IS NULL OR wp.next_review <= ?)
     ORDER BY COALESCE(wp.next_review, ?) ASC, w.level ASC, w.id ASC
     LIMIT ?;`,[a,r,r,t])}async function zt(a,t=10){const s=await I();return y(s,`SELECT id, level, uz, reading, ru, image_url AS imageUrl
     FROM words
     WHERE level = ?
     ORDER BY RANDOM()
     LIMIT ?;`,[a,t])}async function wt(a,t){const s=await I(),r=D(),o=y(s,"SELECT easiness, interval_days AS intervalDays, repetitions FROM word_progress WHERE word_id = ?;",[a]);let m=2.5,u=1,x=0;o.length>0&&(m=Number(o[0].easiness),u=Number(o[0].intervalDays),x=Number(o[0].repetitions)),t<3?(x=0,u=1):(x+=1,x===1?u=1:x===2?u=3:u=Math.max(1,Math.round(u*m))),m=Math.max(1.3,m+(.1-(5-t)*(.08+(5-t)*.02)));const w=ei(r,u);return Q(s,`INSERT INTO word_progress
      (word_id, easiness, interval_days, repetitions, next_review, last_score)
     VALUES (?, ?, ?, ?, ?, ?)
     ON CONFLICT(word_id) DO UPDATE SET
      easiness = excluded.easiness,
      interval_days = excluded.interval_days,
      repetitions = excluded.repetitions,
      next_review = excluded.next_review,
      last_score = excluded.last_score;`,[a,m,u,x,w,t]),Q(s,"INSERT INTO word_review_events (word_id, score, created_at) VALUES (?, ?, ?);",[a,t,new Date().toISOString()]),ge(s),{nextReview:w,intervalDays:u,repetitions:x}}async function ft(a){const t=await I(),s=D(),[{totalWordsLevel:r}]=y(t,"SELECT COUNT(*) AS totalWordsLevel FROM words WHERE level = ?;",[a]),[{learnedWordsLevel:o}]=y(t,`SELECT COUNT(*) AS learnedWordsLevel
     FROM words w
     JOIN word_progress wp ON wp.word_id = w.id
     WHERE w.level = ? AND wp.repetitions > 0;`,[a]),[{masteredWordsLevel:m}]=y(t,`SELECT COUNT(*) AS masteredWordsLevel
     FROM words w
     JOIN word_progress wp ON wp.word_id = w.id
     WHERE w.level = ? AND wp.repetitions >= 2;`,[a]),[{dueWordsLevel:u}]=y(t,`SELECT COUNT(*) AS dueWordsLevel
     FROM words w
     LEFT JOIN word_progress wp ON wp.word_id = w.id
     WHERE w.level = ?
       AND (wp.next_review IS NULL OR wp.next_review <= ?);`,[a,s]),[{learnedWordsTotal:x}]=y(t,"SELECT COUNT(*) AS learnedWordsTotal FROM word_progress WHERE repetitions > 0;"),[{masteredWordsTotal:w}]=y(t,"SELECT COUNT(*) AS masteredWordsTotal FROM word_progress WHERE repetitions >= 2;"),[{totalPhrases:k}]=y(t,"SELECT COUNT(*) AS totalPhrases FROM cards;"),[{learnedPhrases:W}]=y(t,"SELECT COUNT(*) AS learnedPhrases FROM progress WHERE repetitions > 0;"),[{masteredPhrases:_}]=y(t,"SELECT COUNT(*) AS masteredPhrases FROM progress WHERE repetitions >= 2;"),[{duePhrases:A}]=y(t,`SELECT COUNT(*) AS duePhrases
     FROM cards c
     LEFT JOIN progress p ON p.card_id = c.id
     WHERE p.next_review IS NULL OR p.next_review <= ?;`,[s]),[{quizSuccess:P}]=y(t,"SELECT COUNT(*) AS quizSuccess FROM word_quiz_results WHERE level = ? AND is_success = 1;",[a]),[{quizFail:M}]=y(t,"SELECT COUNT(*) AS quizFail FROM word_quiz_results WHERE level = ? AND is_success = 0;",[a]),K=y(t,"SELECT level, SUM(is_success) AS successCount FROM word_quiz_results GROUP BY level;"),p=y(t,"SELECT DISTINCT level FROM words ORDER BY level ASC;"),N=new Map(K.map(S=>[Number(S.level),Number(S.successCount)]));let j=p.length?Number(p[0].level):1;for(let S=0;S<p.length;S+=1){const O=Number(p[S].level);S===0&&(j=O);const E=p[S+1]?Number(p[S+1].level):O;if((N.get(O)||0)>0)j=E;else break}return{level:Number(a),words:{totalLevel:Number(r),learnedLevel:Number(o),masteredLevel:Number(m),dueLevel:Number(u),learnedTotal:Number(x),masteredTotal:Number(w)},phrases:{total:Number(k),learned:Number(W),mastered:Number(_),due:Number(A)},quiz:{success:Number(P),fail:Number(M)},unlockedLevel:Number(j)}}async function kt(a,t,s){const r=await I(),o=t===10&&s===10?1:0,m=new Date().toISOString();return Q(r,"INSERT INTO word_quiz_results (level, score, total, is_success, created_at) VALUES (?, ?, ?, ?, ?);",[a,t,s,o,m]),ge(r),{isSuccess:!!o}}async function Ya(){const a=await I();ge(a);const t=localStorage.getItem(je),s=t?JSON.parse(t):[];return{app:"UzLang",version:1,exportedAt:new Date().toISOString(),data:s}}async function Et(){const a=await I(),t=D(),s=20,r=1,[{wordsDone:o}]=y(a,`SELECT COUNT(*) AS wordsDone
     FROM word_review_events
     WHERE substr(created_at, 1, 10) = ?;`,[t]),[{perfectTestsDone:m}]=y(a,`SELECT COUNT(*) AS perfectTestsDone
     FROM word_quiz_results
     WHERE is_success = 1
       AND substr(created_at, 1, 10) = ?;`,[t]),u=Number(o),x=Number(m),w=u>=s&&x>=r,k=y(a,`SELECT substr(created_at, 1, 10) AS day, COUNT(*) AS count
     FROM word_review_events
     GROUP BY day
     ORDER BY day;`),W=y(a,`SELECT substr(created_at, 1, 10) AS day, COUNT(*) AS count
     FROM word_quiz_results
     WHERE is_success = 1
     GROUP BY day
     ORDER BY day;`),_=new Map(k.map(E=>[String(E.day),Number(E.count)])),A=new Map(W.map(E=>[String(E.day),Number(E.count)])),P=new Set([..._.keys(),...A.keys()]),M=new Set;P.forEach(E=>{const B=_.get(E)||0,G=A.get(E)||0;B>=s&&G>=r&&M.add(E)});let K=0;for(let E=0;E<3650;E+=1){const B=D(me(new Date(t),-E));if(M.has(B)){K+=1;continue}break}let p=0,N=0;if(P.size>0){const B=Array.from(P).sort()[0];for(let G=new Date(B);D(G)<=t;G=me(G,1)){const oe=D(G);M.has(oe)?(N+=1,N>p&&(p=N)):N=0}}const j=[3,7,14,30,60,100],S=j.find(E=>E>K)||j[j.length-1],O=Math.min(100,Math.round(Math.max(0,K)/Math.max(1,S)*100));return{date:t,wordsTarget:s,wordsDone:u,wordsCompleted:u>=s,perfectTestsTarget:r,perfectTestsDone:x,perfectTestsCompleted:x>=r,allCompleted:w,streak:{current:K,longest:p,nextMilestone:S,progressPercent:O}}}async function Ha(a=14,t=8){var K;const s=await I(),r=nt(a),o=r[0],m=y(s,`SELECT substr(created_at, 1, 10) AS day, COUNT(*) AS count
     FROM word_review_events
     WHERE substr(created_at, 1, 10) >= ?
     GROUP BY day
     ORDER BY day;`,[o]),u=new Map(m.map(p=>[String(p.day),Number(p.count)])),x=r.map(p=>({day:p,label:p.slice(5),count:u.get(p)||0})),w=lt(t),k=((K=w[0])==null?void 0:K.startDate)||D(),W=y(s,`SELECT created_at
     FROM word_quiz_results
     WHERE is_success = 1 AND substr(created_at, 1, 10) >= ?;`,[k]),_=new Map;W.forEach(p=>{const N=new Date(String(p.created_at)),j=ai(N);_.set(j,(_.get(j)||0)+1)});const A=w.map(p=>({weekKey:p.key,label:p.label,count:_.get(p.key)||0})),M=y(s,`SELECT w.level AS level,
            COUNT(*) AS total,
            SUM(CASE WHEN wp.repetitions > 0 THEN 1 ELSE 0 END) AS learned,
            SUM(CASE WHEN wp.repetitions >= 2 THEN 1 ELSE 0 END) AS mastered
     FROM words w
     LEFT JOIN word_progress wp ON wp.word_id = w.id
     GROUP BY w.level
     ORDER BY w.level;`).map(p=>{const N=Number(p.total),j=Number(p.learned||0),S=Number(p.mastered||0);return{level:Number(p.level),total:N,learned:j,mastered:S,learnedPercent:N>0?Math.round(j/N*100):0,masteredPercent:N>0?Math.round(S/N*100):0}});return{dailyReviews:x,weeklyPerfectTests:A,levelProgress:M}}async function Tt(a){if(!a||typeof a!="object")throw new Error("Неверный формат файла");if(a.app!=="UzLang"||a.version!==1)throw new Error("Файл не является бэкапом UzLang v1");if(!Array.isArray(a.data)||a.data.length===0)throw new Error("В файле нет данных прогресса");const t=a.data;if(!t.every(w=>Number.isInteger(w)&&w>=0&&w<=255))throw new Error("Поврежденные данные прогресса");const s=await ii(),r=new s.Database(Uint8Array.from(t)),o=["topics","cards","progress","words","word_progress","word_quiz_results"],m=r.exec("SELECT name FROM sqlite_master WHERE type = 'table';"),u=new Set;m.length>0&&(m[0].values||[]).forEach(k=>{Array.isArray(k)&&k[0]&&u.add(String(k[0]))});const x=o.filter(w=>!u.has(w));if(r.close(),x.length>0)throw new Error("В бэкапе отсутствуют обязательные таблицы: "+x.join(", "));localStorage.setItem(je,JSON.stringify(t)),F=null}const Qa="uzlang-auto-backup-index-v1",Ga="uzlang-auto-backup-v1-",Qe="uzlang-last-auto-backup-date-v1",Xa="uzlang-last-manual-export-date-v1",Ge="uzlang-last-backup-reminder-date-v1";function Ze(a){const t=[...a];for(let s=t.length-1;s>0;s-=1){const r=Math.floor(Math.random()*(s+1));[t[s],t[r]]=[t[r],t[s]]}return t}function ea(a,t){const s=new Set([a]),r=Ze(t.filter(o=>o!==a));for(let o=0;o<r.length&&s.size<4;o+=1)s.add(r[o]);for(;s.size<4;)s.add("Не знаю");return Ze(Array.from(s))}function ti(a){return(a.match(/[A-Za-z\u00c0-\u024f\u0400-\u04ffʻ’'`-]+/g)||[]).map(t=>t.trim())}function Te(a){return a.toLowerCase().replace(/[’`]/g,"ʻ").replace(/[^a-z\u00c0-\u024f\u0400-\u04ffʻ'-]/g,"")}function Ja(a){return ti(a).map(Te).join(" ")}function jt(a){const t=a.map((s,r)=>({word:s,index:r})).filter(s=>Te(s.word).length>2);return t.length>0?t[Math.floor(Math.random()*t.length)].index:Math.max(0,a.length-1)}function St(a,t,s){if(t==="translate")return{type:t,card:a,options:ea(a.ru,s)};const r=ti(a.exampleUz||a.uz);if(r.length<2)return{type:"translate",card:a,options:ea(a.ru,s)};if(t==="assemble")return{type:t,card:a,pieces:Ze(r.map((m,u)=>({id:a.id+"-w-"+u,word:m}))),correctWords:r};const o=jt(r);return{type:"missing",card:a,missingWord:r[o],maskedPhrase:r.map((m,u)=>u===o?"____":m).join(" ")}}function Rt(a){return a>=8e3?"Ustoz":a>=5e3?"Usta":a>=3e3?"Faol":a>=1500?"O‘rganuvchi":"Boshlovchi"}function Nt(a,t){const s=new Date(a+"T00:00:00"),r=new Date(t+"T00:00:00");return Math.floor((r.getTime()-s.getTime())/864e5)}function Xe({title:a,subtitle:t,data:s,valueKey:r="count",labelKey:o="label",color:m="primary.main",yMax:u=null}){const x=s.map(k=>Number(k[r]||0)),w=u||Math.max(1,...x);return e.jsx(f,{variant:"outlined",sx:{p:1.5},children:e.jsxs(c,{spacing:1,children:[e.jsx(l,{variant:"subtitle1",children:a}),t?e.jsx(l,{variant:"caption",color:"text.secondary",children:t}):null,e.jsx(c,{direction:"row",alignItems:"flex-end",spacing:.5,sx:{minHeight:120},children:s.map(k=>{const W=Number(k[r]||0),_=Math.max(6,Math.round(W/w*100));return e.jsx($e,{title:`${k[o]}: ${W}`,children:e.jsxs(c,{spacing:.4,alignItems:"center",sx:{flex:1,minWidth:0},children:[e.jsx(ne,{sx:{width:"100%",maxWidth:18,height:`${_}px`,borderRadius:.75,bgcolor:m}}),e.jsx(l,{variant:"caption",color:"text.secondary",noWrap:!0,children:k[o]})]})},String(k[o]))})})]})})}function re({item:a,reveal:t,canSpeak:s,onSpeakText:r,isWord:o=!1}){return a?e.jsxs(Fi,{elevation:2,children:[a.imageUrl?e.jsx(Pi,{component:"img",image:a.imageUrl,alt:"Тема карточки",sx:{height:170,objectFit:"cover"}}):null,e.jsx(Yi,{children:e.jsxs(c,{spacing:1.5,children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(l,{variant:"h5",children:a.uz}),s?e.jsx($e,{title:"Озвучить",children:e.jsx(Je,{color:"primary",onClick:()=>r(a.uz),children:e.jsx(Wa,{})})}):null]}),e.jsx(l,{color:"text.secondary",children:a.reading}),t?e.jsx(l,{variant:"h6",children:a.ru}):null,!o&&t?e.jsxs(e.Fragment,{children:[e.jsx(Hi,{}),e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(l,{children:a.exampleUz}),s?e.jsx($e,{title:"Озвучить пример",children:e.jsx(Je,{size:"small",color:"primary",onClick:()=>r(a.exampleUz),children:e.jsx(Wa,{fontSize:"small"})})}):null]}),e.jsx(l,{color:"text.secondary",children:a.exampleRu})]}):null,o?e.jsxs(l,{variant:"body2",color:"text.secondary",children:["Уровень: ",a.level," ",a.topicTitle?`• ${a.topicTitle}`:""]}):null]})})]}):null}function It({colorMode:a="light",onToggleColorMode:t=()=>{}}){const[s,r]=d.useState(!0),[o,m]=d.useState("words"),[u,x]=d.useState(!1),[w,k]=d.useState(!1),[W,_]=d.useState({date:"",count:0}),A=d.useRef(null),P=d.useRef(!0),[M,K]=d.useState(0),[p,N]=d.useState(0),[j,S]=d.useState([]),[O,E]=d.useState(null),[B,G]=d.useState([]),[oe,Se]=d.useState(0),[ta,ye]=d.useState(!1),[Re,si]=d.useState([]),[sa,ra]=d.useState(0),[pe,ri]=d.useState([]),[xe,na]=d.useState(0),[Ne,oa]=d.useState(0),[ni,la]=d.useState(!1),[V,le]=d.useState([]),[be,Ce]=d.useState(""),[ca,da]=d.useState([]),[ua,ha]=d.useState(!1),[L,oi]=d.useState(1),[ma,li]=d.useState({total:0,byLevel:[]}),[q,ci]=d.useState({level:1,words:{totalLevel:0,learnedLevel:0,masteredLevel:0,dueLevel:0,learnedTotal:0,masteredTotal:0},phrases:{total:0,learned:0,mastered:0,due:0},quiz:{success:0,fail:0},unlockedLevel:1}),[z,di]=d.useState({date:"",wordsTarget:20,wordsDone:0,wordsCompleted:!1,perfectTestsTarget:1,perfectTestsDone:0,perfectTestsCompleted:!1,allCompleted:!1,streak:{current:0,longest:0,nextMilestone:3,progressPercent:0}}),[Ue,ga]=d.useState({dailyReviews:[],weeklyPerfectTests:[],levelProgress:[]}),[Z,ui]=d.useState(14),[ee,hi]=d.useState(8),[ce,mi]=d.useState([]),[qe,Ie]=d.useState(0),[ya,ve]=d.useState(!1),[Oe,gi]=d.useState([]),[pa,xa]=d.useState(0),[de,yi]=d.useState([]),[ze,ba]=d.useState(0),[Le,va]=d.useState(0),[pi,za]=d.useState(!1),[wa,fa]=d.useState([]),[ka,Ea]=d.useState(!1),Y=typeof window<"u"&&"speechSynthesis"in window&&typeof window.SpeechSynthesisUtterance=="function",Ta=d.useMemo(()=>j.find(i=>i.id===O),[j,O]),xi=B[oe],we=Re[sa],T=pe[xe],bi=ce[qe],fe=Oe[pa],X=de[ze],ae=q.words.totalLevel,ja=q.words.learnedLevel,Sa=q.words.masteredLevel,Ra=ae>0?Math.round(ja/ae*100):0,_e=ae>0?Math.round(Sa/ae*100):0,vi=ae>0&&_e>=80,Na=q.words.learnedTotal*4+q.words.masteredTotal*12+q.phrases.learned*8+q.phrases.mastered*20+q.quiz.success*25,zi=Rt(Na);function ie(i){if(!Y||!i)return;window.speechSynthesis.cancel();const n=new window.SpeechSynthesisUtterance(i);n.lang="uz-UZ",n.rate=.92;const v=window.speechSynthesis.getVoices().find(R=>R.lang.toLowerCase().startsWith("uz"));v&&(n.voice=v),window.speechSynthesis.speak(n)}async function Ca(){try{const i=await Ya(),n=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),g="uzlang-progress-"+new Date().toISOString().slice(0,10)+".json",v=URL.createObjectURL(n),R=document.createElement("a");R.href=v,R.download=g,R.click(),URL.revokeObjectURL(v),localStorage.setItem(Xa,new Date().toISOString().slice(0,10)),localStorage.setItem(Ge,new Date().toISOString().slice(0,10))}catch(i){alert("Не удалось экспортировать прогресс: "+i.message)}}async function wi(){const i=new Date().toISOString().slice(0,10),n=localStorage.getItem(Qe);let g;try{g=JSON.parse(localStorage.getItem(Qa)||"[]"),Array.isArray(g)||(g=[])}catch{g=[]}if(n!==i)try{const Fe=await Ya(),Ui=Ga+i;localStorage.setItem(Ui,JSON.stringify(Fe));const Pe=[i,...g.filter(he=>he!==i)].slice(0,14);g.filter(he=>!Pe.includes(he)).forEach(he=>localStorage.removeItem(Ga+he)),localStorage.setItem(Qa,JSON.stringify(Pe)),localStorage.setItem(Qe,i),g=Pe}catch{}_({date:localStorage.getItem(Qe)||"",count:g.length});const v=localStorage.getItem(Xa),R=localStorage.getItem(Ge);(!v||Nt(v,i)>=3)&&R!==i&&k(!0)}async function fi(i){const n=i.target.files&&i.target.files[0];if(n)try{const g=await n.text(),v=JSON.parse(g);await Tt(v),alert("Прогресс импортирован. Страница будет обновлена."),window.location.reload()}catch(g){alert("Ошибка импорта: "+g.message)}finally{A.current&&(A.current.value="")}}function ki(){A.current&&A.current.click()}async function ue(i){const n=await ft(i);ci(n)}async function ke(){const i=await Et();di(i)}const te=d.useCallback(async(i=Z,n=ee)=>{const g=await Ha(i,n);ga(g)},[Z,ee]);async function Ua(){const i=await yt(30);si(i),ra(0)}async function qa(i){const n=await gt(i);G(n),Se(0),ye(!1)}async function Ae(i){const n=await pt(i,10),g=n.map(H=>H.ru),v=["translate","assemble","missing"],R=n.map((H,Fe)=>St(H,v[Fe%v.length],g));ri(R),na(0),oa(0),la(!1),le([]),Ce(""),da([]),ha(!1)}async function Me(i){const n=await vt(i,30);gi(n),xa(0)}async function Ia(i){const n=await Pa(i,1e3);mi(n),Ie(0),ve(!1)}async function De(i){const n=await zt(i,10),v=(await Pa(i,1e3)).map(H=>H.ru),R=n.map(H=>({...H,options:ea(H.ru,v)}));yi(R),ba(0),va(0),za(!1),fa([]),Ea(!1)}d.useEffect(()=>{async function i(){const[n,g]=await Promise.all([mt(),bt()]);S(n),li(g),n.length>0&&(E(n[0].id),await qa(n[0].id),await Ae(n[0].id)),await Ua(),await Ia(1),await Me(1),await De(1),await ue(1),await ke();const v=await Ha(14,8);ga(v),await wi(),r(!1)}return i(),()=>{Y&&window.speechSynthesis.cancel()}},[Y]),d.useEffect(()=>{O&&(qa(O),Ae(O))},[O]),d.useEffect(()=>{s||te(Z,ee)},[s,Z,ee,te]),d.useEffect(()=>{if(P.current){P.current=!1;return}async function i(){await Ia(L),await Me(L),await De(L),await ue(L)}i()},[L,te]);async function We(i){if(!we)return;await xt(we.id,i);const n=sa+1;n<Re.length?ra(n):await Ua(),await ue(L),await ke(),await te()}async function Ke(i){if(!fe)return;await wt(fe.id,i);const n=pa+1;n<Oe.length?xa(n):await Me(L),await ue(L),await ke(),await te()}function Ei(i,n){if(!i)return;const g=i.type==="translate"?i.card.uz:i.card.exampleRu,v=i.type==="translate"?i.card.ru:i.type==="assemble"?i.correctWords.join(" "):i.missingWord;da(R=>[...R,{id:i.card.id+"-"+i.type+"-"+xe,type:i.type,prompt:g,correctAnswer:v,userAnswer:n||"—"}])}function Be(i,n=""){i||Ei(T,n);const g=i?Ne+1:Ne;if(oa(g),xe+1>=pe.length){la(!0);return}na(v=>v+1),le([]),Ce("")}function Ti(i){le(n=>n.includes(i)?n:[...n,i])}function ji(i){le(n=>n.filter(g=>g!==i))}function Si(){le([])}function Ri(){if(!T||T.type!=="assemble")return;const i=new Map(T.pieces.map(v=>[v.id,v.word])),n=V.map(v=>i.get(v)).filter(Boolean).join(" "),g=T.correctWords.join(" ");Be(Ja(n)===Ja(g),n)}function Ni(){if(!T||T.type!=="missing")return;const i=Te(be),n=Te(T.missingWord);Be(!!i&&i===n,be)}async function Ci(i,n=""){!i&&X&&fa(R=>[...R,{id:X.id+"-"+ze,prompt:X.uz,correctAnswer:X.ru,userAnswer:n||"—"}]);const g=i?Le+1:Le,v=ze+1>=de.length;if(va(g),v){za(!0),await kt(L,g,de.length||10),await ue(L),await ke(),await te();return}ba(R=>R+1)}return s?e.jsx(ne,{minHeight:"100vh",display:"grid",sx:{placeItems:"center"},children:e.jsx(qi,{})}):e.jsxs(e.Fragment,{children:[e.jsx(Ii,{position:"sticky",color:"primary",elevation:1,children:e.jsx(Oa,{maxWidth:"md",children:e.jsxs(ne,{py:1.5,display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"flex-start",sm:"center"},justifyContent:"space-between",gap:1,children:[e.jsxs(c,{spacing:.25,children:[e.jsx(l,{variant:"h6",lineHeight:1.1,children:"UzLang"}),e.jsx(l,{variant:"body2",sx:{opacity:.95},children:"Самоучитель узбекского языка"})]}),e.jsxs(c,{direction:"row",spacing:1,alignItems:{xs:"flex-start",sm:"center"},sx:{width:{xs:"100%",sm:"auto"}},children:[e.jsxs(l,{variant:"body2",sx:{opacity:.9,textAlign:{xs:"left",sm:"right"},width:{xs:"100%",sm:"auto"}},children:["Сначала слова, потом фразы:",e.jsx("br",{}),"короткие повторения каждый день"]}),e.jsx(Je,{size:"small",color:"inherit",onClick:t,sx:{mt:{xs:.25,sm:0},ml:{xs:0,sm:.5}},children:a==="dark"?e.jsx(Oi,{fontSize:"small"}):e.jsx(Li,{fontSize:"small"})})]})]})})}),e.jsx(Oa,{maxWidth:"md",sx:{py:3},children:e.jsxs(c,{spacing:2,children:[e.jsxs(f,{sx:{p:2},children:[e.jsxs(c,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:{xs:"stretch",sm:"center"},justifyContent:"space-between",children:[e.jsxs(c,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:{xs:"stretch",sm:"center"},sx:{width:{xs:"100%",sm:"auto"}},children:[e.jsxs(Ye,{color:"primary",exclusive:!0,value:o,onChange:(i,n)=>{n&&m(n)},children:[e.jsx(J,{value:"words",children:"Слова"}),e.jsx(J,{value:"phrases",children:"Фразы"})]}),o==="words"?e.jsxs(e.Fragment,{children:[e.jsxs(_i,{size:"small",sx:{minWidth:{xs:"100%",sm:180},width:{xs:"100%",sm:"auto"}},children:[e.jsx(Ai,{id:"level-label",children:"Уровень слов"}),e.jsx(Mi,{labelId:"level-label",value:L,label:"Уровень слов",onChange:i=>oi(Number(i.target.value)),children:ma.byLevel.map(i=>{const n=i.level>q.unlockedLevel;return e.jsx(Di,{value:i.level,disabled:n,children:n?"Уровень "+i.level+" ("+i.count+") - закрыт":"Уровень "+i.level+" ("+i.count+")"},i.level)})})]}),e.jsx($,{label:`Слов в базе: ${ma.total}`,color:"secondary"})]}):null]}),e.jsxs(ne,{sx:{width:"100%",display:"flex",flexDirection:{xs:"column",sm:"row"},flexWrap:{xs:"nowrap",sm:"wrap"},gap:1,justifyContent:{xs:"stretch",sm:"flex-end"}},children:[e.jsx(b,{size:"small",variant:"outlined",onClick:Ca,sx:{width:{xs:"100%",sm:"auto"}},children:"Экспорт прогресса"}),e.jsx(b,{size:"small",variant:"outlined",onClick:ki,sx:{width:{xs:"100%",sm:"auto"}},children:"Импорт прогресса"}),e.jsx(b,{size:"small",variant:"outlined",onClick:()=>x(!0),sx:{width:{xs:"100%",sm:"auto"}},children:"Как заниматься"})]})]}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Авто-бэкап: ",W.date||"нет"," • локальных копий: ",W.count]})]}),o==="phrases"?e.jsxs(C,{container:!0,spacing:2,children:[e.jsx(C,{size:{xs:12,md:4},children:e.jsxs(f,{sx:{p:2},children:[e.jsx(l,{variant:"subtitle1",gutterBottom:!0,children:"Темы фраз"}),e.jsx(c,{spacing:1,children:j.map(i=>e.jsx(b,{variant:i.id===O?"contained":"outlined",onClick:()=>E(i.id),sx:{justifyContent:"flex-start"},children:i.title},i.id))}),Ta?e.jsx(l,{color:"text.secondary",sx:{mt:1.5},children:Ta.description}):null]})}),e.jsx(C,{size:{xs:12,md:8},children:e.jsxs(f,{sx:{p:2},children:[e.jsxs(La,{value:M,onChange:(i,n)=>K(n),variant:"fullWidth",children:[e.jsx(se,{label:"Учить"}),e.jsx(se,{label:"Повторить"}),e.jsx(se,{label:"Тест"})]}),e.jsxs(ne,{sx:{mt:2},children:[M===0?e.jsxs(c,{spacing:2,children:[e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx($,{label:`${oe+1} / ${B.length||1}`}),e.jsx(b,{onClick:()=>ye(i=>!i),children:ta?"Скрыть перевод":"Показать перевод"})]}),e.jsx(re,{item:xi,reveal:ta,canSpeak:Y,onSpeakText:ie}),e.jsxs(c,{direction:"row",spacing:1,children:[e.jsx(b,{variant:"outlined",disabled:oe===0,onClick:()=>{Se(i=>Math.max(0,i-1)),ye(!1)},children:"Назад"}),e.jsx(b,{variant:"contained",disabled:B.length===0,onClick:()=>{Se(i=>B.length===0?0:Math.min(B.length-1,i+1)),ye(!1)},children:"Дальше"})]})]}):null,M===1?e.jsxs(c,{spacing:2,children:[e.jsxs(l,{variant:"subtitle1",children:["Карточек к повторению: ",Re.length]}),we?e.jsxs(e.Fragment,{children:[e.jsx(re,{item:we,reveal:!0,canSpeak:Y,onSpeakText:ie}),e.jsx(l,{color:"text.secondary",children:"Насколько легко вспомнили?"}),e.jsxs(c,{direction:"row",spacing:1,flexWrap:"wrap",children:[e.jsx(b,{color:"error",variant:"outlined",onClick:()=>We(1),children:"Тяжело"}),e.jsx(b,{color:"warning",variant:"outlined",onClick:()=>We(3),children:"Нормально"}),e.jsx(b,{color:"success",variant:"contained",onClick:()=>We(5),children:"Легко"})]})]}):e.jsx(U,{severity:"success",children:"Сегодня всё повторено. Отлично."})]}):null,M===2?e.jsx(c,{spacing:2,children:!ni&&T?e.jsxs(e.Fragment,{children:[e.jsx($,{label:`Вопрос ${xe+1} / ${pe.length||1}`}),T.type==="translate"?e.jsxs(e.Fragment,{children:[e.jsx(re,{item:T.card,reveal:!1,canSpeak:Y,onSpeakText:ie}),e.jsx(l,{children:"Что это значит?"}),e.jsx(c,{spacing:1,children:T.options.map(i=>e.jsx(b,{variant:"outlined",onClick:()=>Be(i===T.card.ru,i),sx:{justifyContent:"flex-start"},children:i},i))})]}):null,T.type==="assemble"?e.jsxs(c,{spacing:1.5,children:[e.jsx(l,{color:"text.secondary",children:"Соберите фразу на узбекском по переводу:"}),e.jsx(U,{severity:"info",children:T.card.exampleRu}),e.jsx(f,{variant:"outlined",sx:{p:1.5,minHeight:70},children:e.jsx(c,{direction:"row",spacing:1,flexWrap:"wrap",useFlexGap:!0,children:V.length===0?e.jsx(l,{color:"text.secondary",children:"Выберите слова в правильном порядке"}):V.map(i=>{const n=T.pieces.find(g=>g.id===i);return n?e.jsx(b,{size:"small",onClick:()=>ji(i),children:n.word},i):null})})}),e.jsx(c,{direction:"row",spacing:1,flexWrap:"wrap",useFlexGap:!0,children:T.pieces.filter(i=>!V.includes(i.id)).map(i=>e.jsx(b,{size:"small",variant:"outlined",onClick:()=>Ti(i.id),children:i.word},i.id))}),e.jsxs(c,{direction:"row",spacing:1,children:[e.jsx(b,{variant:"outlined",onClick:Si,disabled:V.length===0,children:"Сбросить"}),e.jsx(b,{variant:"contained",onClick:Ri,disabled:V.length!==T.correctWords.length,children:"Проверить"})]})]}):null,T.type==="missing"?e.jsxs(c,{spacing:1.5,children:[e.jsx(l,{color:"text.secondary",children:"Введите пропущенное слово:"}),e.jsx(U,{severity:"info",children:T.card.exampleRu}),e.jsx(f,{variant:"outlined",sx:{p:1.5},children:e.jsx(l,{variant:"h6",children:T.maskedPhrase})}),e.jsx(Wi,{label:"Пропущенное слово",value:be,onChange:i=>Ce(i.target.value),size:"small",autoComplete:"off"}),e.jsx(b,{variant:"contained",onClick:Ni,disabled:!be.trim(),children:"Проверить"})]}):null]}):e.jsxs(e.Fragment,{children:[e.jsxs(U,{severity:"info",children:["Результат: ",Ne," из ",pe.length]}),e.jsxs(c,{direction:"row",spacing:1,flexWrap:"wrap",children:[e.jsx(b,{variant:"contained",onClick:()=>Ae(O),children:"Пройти ещё раз"}),ca.length>0?e.jsx(b,{variant:"outlined",onClick:()=>ha(i=>!i),children:ua?"Скрыть разбор":"Разбор ошибок"}):null]}),ua?e.jsx(f,{variant:"outlined",sx:{p:1.5},children:e.jsxs(c,{spacing:1.5,children:[e.jsx(l,{variant:"subtitle1",children:"Ошибки в тесте фраз"}),ca.map(i=>e.jsx(f,{variant:"outlined",sx:{p:1.25},children:e.jsxs(c,{spacing:.5,children:[e.jsxs(l,{variant:"body2",color:"text.secondary",children:["Задание: ",i.prompt]}),e.jsxs(l,{variant:"body2",children:["Ваш ответ: ",i.userAnswer]}),e.jsxs(l,{variant:"body2",children:["Правильно: ",i.correctAnswer]})]})},i.id))]})}):null]})}):null]})]})})]}):null,o==="words"?e.jsxs(f,{sx:{p:2},children:[e.jsxs(La,{value:p,onChange:(i,n)=>N(n),variant:"fullWidth",children:[e.jsx(se,{label:"Учить слова"}),e.jsx(se,{label:"Повтор слов"}),e.jsx(se,{label:"Тест слов"})]}),e.jsxs(ne,{sx:{mt:2},children:[p===0?e.jsxs(c,{spacing:2,children:[e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx($,{label:`${qe+1} / ${ce.length||1}`}),e.jsx(b,{onClick:()=>ve(i=>!i),children:ya?"Скрыть перевод":"Показать перевод"})]}),e.jsx(re,{item:bi,reveal:ya,canSpeak:Y,onSpeakText:ie,isWord:!0}),e.jsxs(c,{direction:"row",spacing:1,children:[e.jsx(b,{variant:"outlined",disabled:qe===0,onClick:()=>{Ie(i=>Math.max(0,i-1)),ve(!1)},children:"Назад"}),e.jsx(b,{variant:"contained",disabled:ce.length===0,onClick:()=>{Ie(i=>ce.length===0?0:Math.min(ce.length-1,i+1)),ve(!1)},children:"Дальше"})]})]}):null,p===1?e.jsxs(c,{spacing:2,children:[e.jsxs(l,{variant:"subtitle1",children:["Слов к повторению: ",Oe.length]}),fe?e.jsxs(e.Fragment,{children:[e.jsx(re,{item:fe,reveal:!0,canSpeak:Y,onSpeakText:ie,isWord:!0}),e.jsx(l,{color:"text.secondary",children:"Насколько легко вспомнили?"}),e.jsxs(c,{direction:"row",spacing:1,flexWrap:"wrap",children:[e.jsx(b,{color:"error",variant:"outlined",onClick:()=>Ke(1),children:"Тяжело"}),e.jsx(b,{color:"warning",variant:"outlined",onClick:()=>Ke(3),children:"Нормально"}),e.jsx(b,{color:"success",variant:"contained",onClick:()=>Ke(5),children:"Легко"})]})]}):e.jsx(U,{severity:"success",children:"Повторы по словам на сегодня завершены."})]}):null,p===2?e.jsx(c,{spacing:2,children:!pi&&X?e.jsxs(e.Fragment,{children:[e.jsx($,{label:`Слово ${ze+1} / ${de.length||1}`}),e.jsx(re,{item:X,reveal:!1,canSpeak:Y,onSpeakText:ie,isWord:!0}),e.jsx(l,{children:"Выберите перевод слова:"}),e.jsx(c,{spacing:1,children:X.options.map(i=>e.jsx(b,{variant:"outlined",onClick:()=>Ci(i===X.ru,i),sx:{justifyContent:"flex-start"},children:i},i))})]}):e.jsxs(e.Fragment,{children:[e.jsxs(U,{severity:"info",children:["Результат: ",Le," из ",de.length]}),e.jsxs(c,{direction:"row",spacing:1,flexWrap:"wrap",children:[e.jsx(b,{variant:"contained",onClick:()=>De(L),children:"Пройти ещё раз"}),wa.length>0?e.jsx(b,{variant:"outlined",onClick:()=>Ea(i=>!i),children:ka?"Скрыть разбор":"Разбор ошибок"}):null]}),ka?e.jsx(f,{variant:"outlined",sx:{p:1.5},children:e.jsxs(c,{spacing:1.5,children:[e.jsx(l,{variant:"subtitle1",children:"Ошибки в тесте слов"}),wa.map(i=>e.jsx(f,{variant:"outlined",sx:{p:1.25},children:e.jsxs(c,{spacing:.5,children:[e.jsxs(l,{variant:"body2",color:"text.secondary",children:["Слово: ",i.prompt]}),e.jsxs(l,{variant:"body2",children:["Ваш ответ: ",i.userAnswer]}),e.jsxs(l,{variant:"body2",children:["Правильно: ",i.correctAnswer]})]})},i.id))]})}):null]})}):null]})]}):null,e.jsx(f,{sx:{p:2},children:e.jsxs(c,{spacing:1.5,children:[e.jsx(l,{variant:"h6",children:"Ваш прогресс"}),e.jsxs(l,{color:"text.secondary",children:["Уровень ",L,": выучено ",ja," из ",ae,", освоено ",Sa,"."]}),e.jsx(Ee,{variant:"determinate",value:Ra,sx:{height:9,borderRadius:10}}),e.jsxs(C,{container:!0,spacing:1,children:[e.jsx(C,{size:{xs:12,sm:6,md:4},children:e.jsxs(f,{variant:"outlined",sx:{p:1.25,height:"100%"},children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Прогресс уровня"}),e.jsxs(l,{variant:"h6",children:[Ra,"%"]})]})}),e.jsx(C,{size:{xs:12,sm:6,md:4},children:e.jsxs(f,{variant:"outlined",sx:{p:1.25,height:"100%"},children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Освоение уровня"}),e.jsxs(l,{variant:"h6",children:[_e,"%"]})]})}),e.jsx(C,{size:{xs:12,sm:6,md:4},children:e.jsxs(f,{variant:"outlined",sx:{p:1.25,height:"100%"},children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Слова к повтору"}),e.jsx(l,{variant:"h6",children:q.words.dueLevel})]})}),e.jsx(C,{size:{xs:12,sm:6,md:4},children:e.jsxs(f,{variant:"outlined",sx:{p:1.25,height:"100%"},children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Фразы к повтору"}),e.jsx(l,{variant:"h6",children:q.phrases.due})]})}),e.jsx(C,{size:{xs:12,sm:6,md:4},children:e.jsxs(f,{variant:"outlined",sx:{p:1.25,height:"100%"},children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Тестов успешно (10/10)"}),e.jsx(l,{variant:"h6",children:q.quiz.success})]})}),e.jsx(C,{size:{xs:12,sm:6,md:4},children:e.jsxs(f,{variant:"outlined",sx:{p:1.25,height:"100%"},children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Тестов неуспешно"}),e.jsx(l,{variant:"h6",children:q.quiz.fail})]})}),e.jsx(C,{size:{xs:12,sm:6,md:4},children:e.jsxs(f,{variant:"outlined",sx:{p:1.25,height:"100%"},children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Очки"}),e.jsx(l,{variant:"h6",children:Na})]})}),e.jsx(C,{size:{xs:12,sm:6,md:4},children:e.jsxs(f,{variant:"outlined",sx:{p:1.25,height:"100%"},children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Ранг"}),e.jsx(l,{variant:"h6",children:zi})]})})]}),q.quiz.success>0?e.jsxs(U,{severity:"success",children:["Тест пройден на 10/10: ",q.quiz.success," раз. Следующий уровень открыт."]}):e.jsx(U,{severity:"warning",children:"Чтобы открыть следующий уровень, нужно хотя бы один раз сдать тест на 10/10."}),vi?e.jsxs(U,{severity:"success",children:["Уровень ",L," пройден: освоение ",_e,"%. Можно переходить дальше."]}):e.jsx(U,{severity:"info",children:"Цель уровня: освоить 80% слов и пройти тест несколько раз подряд."})]})}),e.jsx(f,{sx:{p:2},children:e.jsxs(c,{spacing:1.5,children:[e.jsx(l,{variant:"h6",children:"Ежедневные цели"}),e.jsx(l,{color:"text.secondary",children:"Сегодня: 20 повторов слов и 1 тест слов на 10/10."}),e.jsxs(c,{spacing:.75,children:[e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(l,{variant:"body2",children:["Слова: ",z.wordsDone," / ",z.wordsTarget]}),e.jsx($,{size:"small",color:z.wordsCompleted?"success":"default",label:z.wordsCompleted?"Выполнено":"В процессе"})]}),e.jsx(Ee,{variant:"determinate",value:Math.min(100,Math.round(z.wordsDone/z.wordsTarget*100)),sx:{height:8,borderRadius:8}})]}),e.jsxs(c,{spacing:.75,children:[e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(l,{variant:"body2",children:["Тест 10/10: ",z.perfectTestsDone," / ",z.perfectTestsTarget]}),e.jsx($,{size:"small",color:z.perfectTestsCompleted?"success":"default",label:z.perfectTestsCompleted?"Выполнено":"В процессе"})]}),e.jsx(Ee,{variant:"determinate",value:Math.min(100,Math.round(z.perfectTestsDone/z.perfectTestsTarget*100)),sx:{height:8,borderRadius:8}})]}),z.allCompleted?e.jsx(U,{severity:"success",children:"Ежедневные цели выполнены. Отличная работа."}):e.jsx(U,{severity:"info",children:"Закройте обе цели, чтобы завершить дневной план."}),e.jsx(f,{variant:"outlined",sx:{p:1.5,borderColor:z.streak.current>0?"warning.main":"divider",background:z.streak.current>0?"linear-gradient(90deg, rgba(255,167,38,0.10) 0%, rgba(255,152,0,0.04) 100%)":"transparent"},children:e.jsxs(c,{spacing:1.25,children:[e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(c,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(Ki,{color:z.streak.current>0?"warning":"disabled"}),e.jsxs(l,{variant:"subtitle1",children:["Серия: ",z.streak.current," дн."]})]}),e.jsx($,{size:"small",icon:e.jsx(Bi,{}),label:`Рекорд: ${z.streak.longest} дн.`,color:z.streak.longest>0?"secondary":"default"})]}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:["До следующей отметки: ",z.streak.nextMilestone," дней подряд."]}),e.jsx(Ee,{variant:"determinate",value:z.streak.progressPercent,color:"warning",sx:{height:8,borderRadius:8}}),z.streak.current>=30?e.jsx(U,{severity:"success",children:"Мощная серия. Вы идете в очень стабильном ритме."}):z.streak.current>=7?e.jsx(U,{severity:"success",children:"Отличная динамика. Серия уже крепкая."}):z.streak.current>=1?e.jsx(U,{severity:"info",children:"Серия запущена. Не прерывайте ритм завтра."}):e.jsx(U,{severity:"warning",children:"Сегодня можно начать новую серию."})]})})]})}),e.jsx(f,{sx:{p:2},children:e.jsxs(c,{spacing:1.5,children:[e.jsx(l,{variant:"h6",children:"Аналитика"}),e.jsxs(c,{direction:{xs:"column",sm:"row"},spacing:1.5,alignItems:{xs:"stretch",sm:"center"},justifyContent:"space-between",children:[e.jsxs(c,{direction:"row",spacing:1,alignItems:"center",flexWrap:"wrap",children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Дни:"}),e.jsxs(Ye,{size:"small",exclusive:!0,value:Z,onChange:(i,n)=>{n&&ui(Number(n))},children:[e.jsx(J,{value:7,children:"7"}),e.jsx(J,{value:14,children:"14"}),e.jsx(J,{value:30,children:"30"})]})]}),e.jsxs(c,{direction:"row",spacing:1,alignItems:"center",flexWrap:"wrap",children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Недели:"}),e.jsxs(Ye,{size:"small",exclusive:!0,value:ee,onChange:(i,n)=>{n&&hi(Number(n))},children:[e.jsx(J,{value:4,children:"4"}),e.jsx(J,{value:8,children:"8"}),e.jsx(J,{value:12,children:"12"})]})]})]}),e.jsxs(C,{container:!0,spacing:1.5,children:[e.jsx(C,{size:{xs:12},children:e.jsx(Xe,{title:"Повторы по дням",subtitle:`Последние ${Z} дней`,data:Ue.dailyReviews,valueKey:"count",labelKey:"label",color:"primary.main"})}),e.jsx(C,{size:{xs:12},children:e.jsx(Xe,{title:"Тесты 10/10 по неделям",subtitle:`Последние ${ee} недель`,data:Ue.weeklyPerfectTests,valueKey:"count",labelKey:"label",color:"secondary.main"})}),e.jsx(C,{size:{xs:12},children:e.jsx(Xe,{title:"Освоение по уровням",subtitle:"Процент mastered",data:Ue.levelProgress.map(i=>({label:"L"+i.level,value:i.masteredPercent})),valueKey:"value",labelKey:"label",color:"success.main",yMax:100})})]})]})})]})}),e.jsx("input",{ref:A,type:"file",accept:"application/json",style:{display:"none"},onChange:fi}),e.jsxs(_a,{open:u,onClose:()=>x(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Aa,{children:"Как заниматься без хаоса"}),e.jsx(Ma,{dividers:!0,children:e.jsxs(c,{spacing:1.5,children:[e.jsx(l,{children:"1. Выбери текущий уровень слов и проходи вкладку «Учить слова» по порядку."}),e.jsx(l,{children:"2. Каждый день сначала делай «Повтор слов», потом «Тест слов»."}),e.jsx(l,{children:"3. Цель уровня: освоение 80%+ и минимум один тест 10/10 для открытия следующего уровня."}),e.jsx(l,{children:"4. После этого переходи в режим «Фразы»: учи и повторяй только после слов."}),e.jsx(l,{children:"5. Рекомендуемый ритм: 20-30 минут в день, без пропусков длиннее 2 дней."}),e.jsx(l,{color:"text.secondary",children:"Прогресс и очки сохраняются автоматически на этом устройстве."})]})}),e.jsx(Da,{children:e.jsx(b,{onClick:()=>x(!1),variant:"contained",children:"Понятно"})})]}),e.jsxs(_a,{open:w,onClose:()=>k(!1),maxWidth:"xs",fullWidth:!0,children:[e.jsx(Aa,{children:"Напоминание о бэкапе"}),e.jsx(Ma,{dividers:!0,children:e.jsxs(c,{spacing:1.25,children:[e.jsx(l,{children:"Прогресс автоматически сохраняется в локальные JSON-снимки. Рекомендуется также скачать резервную копию."}),e.jsx(l,{color:"text.secondary",children:"Если устройство или браузер очистит хранилище, только вручную скачанный файл поможет восстановить данные."})]})}),e.jsxs(Da,{children:[e.jsx(b,{onClick:()=>{localStorage.setItem(Ge,new Date().toISOString().slice(0,10)),k(!1)},children:"Позже"}),e.jsx(b,{variant:"contained",onClick:async()=>{await Ca(),k(!1)},children:"Скачать сейчас"})]})]})]})}export{It as default};
